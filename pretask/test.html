<!DOCTYPE html>
<html lang="ko" class=""> <!-- 다크 모드 테스트 시 'dark' 클래스 추가 -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refined Minimalist Layout</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* .latin-font: Nanum Myeongjo for Korean glyphs (궁서체 느낌), Playfair Display for Latin (로마자 느낌) */
        .latin-font { font-family: 'Nanum Myeongjo', serif, 'Playfair Display'; }
    </style>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script>
        tailwind.config = {
            content: ["./*.html"],
            theme: {
                extend: {
                    colors: {
                        primary: {
                            blue: {
                                light: "#00ccdd"
                            }
                        }
                    }
                }
            },
            darkMode: "class"
        };
        
        // 다크 모드 초기 설정
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>

<body class="bg-white dark:bg-neutral-900 text-neutral-800 dark:text-neutral-300 overflow-x-hidden antialiased">
    <div id="root-container" class="relative min-h-screen">
        <input type="checkbox" id="leftNavToggleCheckbox" class="hidden peer">

        <!-- Left Navigation Sidebar -->
        <nav id="left-nav-container"
            class="fixed top-0 left-0 h-screen z-30 bg-white dark:bg-neutral-900 border-r border-neutral-200 dark:border-neutral-800 transition-transform duration-300 ease-in-out w-[calc(100%-4rem)] -translate-x-full peer-checked:translate-x-0 overflow-y-hidden">

            <!-- 모바일 1열 / 데스크탑 다중 열을 처리하는 컨테이너 -->
            <div class="flex h-full w-full">

                <!-- 1열: 검색. 모바일에서는 이 열 하나만 보이며 모든 콘텐츠를 담습니다. -->
                <div
                    class="w-full md:w-1/2 lg:w-1/3 flex-shrink-0 border-r border-neutral-200 dark:border-neutral-800 overflow-y-auto">

                    <!-- 공통 상단: 검색창 -->
                    <div class="p-4 pb-0">
                        <div class="relative mb-4">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                <svg class="h-5 w-5 text-neutral-400" xmlns="http://www.w3.org/2000/svg" fill="none"
                                    viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                                </svg>
                            </span>
                            <input type="text" placeholder="검색..."
                                class="w-full py-2 pl-10 pr-4 bg-neutral-100 dark:bg-neutral-800 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div id="search-results" class="mb-4 hidden">
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">검색
                                결과 1</a>
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">검색
                                결과 2</a>
                        </div>
                    </div>

                    <!-- 모바일 전용 콘텐츠 (md 사이즈 이상에서 숨김) -->
                    <div class="p-4 pt-0 md:hidden">
                        <div class="space-y-2">
                            <!-- 수정순 아코디언 -->
                            <details class="group">
                                <summary
                                    class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                                    <span class="flex items-center text-sm font-semibold">
                                        <!-- Use a consistent 'clock' style heroicon for 수정순 -->
                                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l2 2m6-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                        <span>수정순</span>
                                    </span>
                                    <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </summary>
                                <div class="pl-6 mt-1 space-y-1">
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">최근
                                        수정된 문서 1</a>
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">최근
                                        수정된 문서 2</a>
                                </div>
                            </details>
                            <!-- 생성순 아코디언 -->
                            <details class="group">
                                <summary
                                    class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                                    <span class="flex items-center text-sm font-semibold">
                                        <!-- Use a consistent 'calendar' style heroicon for 생성순 -->
                                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75V4.5M15.75 6.75V4.5M3 9.75h18M5.25 21h13.5A2.25 2.25 0 0021 18.75V7.5A2.25 2.25 0 0018.75 5.25H5.25A2.25 2.25 0 003 7.5v11.25A2.25 2.25 0 005.25 21z" />
                                        </svg>
                                        <span>생성순</span>
                                    </span>
                                    <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </summary>
                                <div class="pl-6 mt-1 space-y-1">
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">새로
                                        만든 문서 1</a>
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">새로
                                        만든 문서 2</a>
                                </div>
                            </details>
                            <!-- 폴더별 아코디언 -->
                            <details class="group">
                                <summary
                                    class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                                    <span class="flex items-center text-sm font-semibold">
                                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                                            viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z" />
                                        </svg>
                                        <span>폴더별</span>
                                    </span>
                                    <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </summary>
                                <div class="pl-6 mt-1 space-y-1">
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">폴더
                                        1</a>
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">폴더
                                        2</a>
                                </div>
                            </details>
                            <!-- 태그별 아코디언 -->
                            <details class="group">
                                <summary
                                    class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                                    <span class="flex items-center text-sm font-semibold">
                                        <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                                            viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M6 6h.008v.008H6V6Z" />
                                        </svg>
                                        <span>태그별</span>
                                    </span>
                                    <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                                    </svg>
                                </summary>
                                <div class="pl-6 mt-1 space-y-1">
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">#태그1</a>
                                    <a href="#"
                                        class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">#태그2</a>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- 2열: 최신 (lg 사이즈부터 표시) -->
                <div
                    class="hidden lg:flex flex-col w-1/3 flex-shrink-0 border-r border-neutral-200 dark:border-neutral-800 overflow-y-auto p-4 space-y-2">
                    <!-- 수정순 아코디언 -->
                    <details class="group" open>
                        <summary
                            class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                            <span class="flex items-center text-sm font-semibold">
                                <!-- clock icon for 수정순 -->
                                <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l2 2m6-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <span>수정순</span>
                            </span>
                            <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                            </svg>
                        </summary>
                        <div class="pl-6 mt-1 space-y-1">
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">최근
                                수정된 문서 1</a>
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">최근
                                수정된 문서 2</a>
                        </div>
                    </details>
                    <!-- 생성순 아코디언 -->
                    <details class="group">
                        <summary
                            class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                            <span class="flex items-center text-sm font-semibold">
                                <!-- calendar icon for 생성순 -->
                                <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75V4.5M15.75 6.75V4.5M3 9.75h18M5.25 21h13.5A2.25 2.25 0 0021 18.75V7.5A2.25 2.25 0 0018.75 5.25H5.25A2.25 2.25 0 003 7.5v11.25A2.25 2.25 0 005.25 21z" />
                                </svg>
                                <span>생성순</span>
                            </span>
                            <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                            </svg>
                        </summary>
                        <div class="pl-6 mt-1 space-y-1">
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">새로
                                만든 문서 1</a>
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">새로
                                만든 문서 2</a>
                        </div>
                    </details>
                </div>

                <!-- 3열: 폴더 & 태그 (md 사이즈부터 표시) -->
                <div class="hidden md:flex flex-col w-1/2 lg:w-1/3 flex-shrink-0 overflow-y-auto p-4 space-y-2">
                    <!-- md 사이즈 전용 정렬 메뉴 -->
                    <div class="lg:hidden space-y-2">
                        <details class="group">
                            <summary
                                class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                                <span class="flex items-center text-sm font-semibold">
                                    <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l2 2m6-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    <span>수정순</span>
                                </span>
                                <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            <div class="pl-6 mt-1 space-y-1">
                                <a href="#"
                                    class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">최근
                                    수정된 문서 1</a>
                                <a href="#"
                                    class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">최근
                                    수정된 문서 2</a>
                            </div>
                        </details>
                        <details class="group">
                            <summary
                                class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                                <span class="flex items-center text-sm font-semibold">
                                    <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75V4.5M15.75 6.75V4.5M3 9.75h18M5.25 21h13.5A2.25 2.25 0 0021 18.75V7.5A2.25 2.25 0 0018.75 5.25H5.25A2.25 2.25 0 003 7.5v11.25A2.25 2.25 0 005.25 21z" />
                                    </svg>
                                    <span>생성순</span>
                                </span>
                                <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            <div class="pl-6 mt-1 space-y-1">
                                <a href="#"
                                    class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">새로
                                    만든 문서 1</a>
                                <a href="#"
                                    class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">새로
                                    만든 문서 2</a>
                            </div>
                        </details>
                    </div>
                    <!-- 폴더별 아코디언 -->
                    <details class="group">
                        <summary
                            class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                            <span class="flex items-center text-sm font-semibold">
                                <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                                    viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z" />
                                </svg>
                                <span>폴더별</span>
                            </span>
                            <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                            </svg>
                        </summary>
                        <div class="pl-6 mt-1 space-y-1">
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">폴더
                                1</a>
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">폴더
                                2</a>
                        </div>
                    </details>
                    <!-- 태그별 아코디언 -->
                    <details class="group">
                        <summary
                            class="flex items-center justify-between w-full p-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md cursor-pointer list-none">
                            <span class="flex items-center text-sm font-semibold">
                                <svg class="h-5 w-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none"
                                    viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z" />
                                </svg>
                                <span>태그별</span>
                            </span>
                            <svg class="h-5 w-5 transform transition-transform duration-200 group-open:rotate-180"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                            </svg>
                        </summary>
                        <div class="pl-6 mt-1 space-y-1">
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">#태그1</a>
                            <a href="#"
                                class="block p-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md">#태그2</a>
                        </div>
                    </details>
                </div>
            </div>
        </nav>

        <!-- Main Content Wrapper -->
        <div id="main-content-wrapper"
            class="w-full flex flex-col relative transition-transform duration-300 ease-in-out min-w-0 peer-checked:translate-x-[calc(100%-4rem)] z-20">

            <!-- Header -->
            <header id="header"
                class="w-full sticky top-0 z-50 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm border-b border-neutral-200 dark:border-neutral-800">
                <div class="flex items-center justify-between p-2 h-14">
                    <!-- 왼쪽 영역 -->
                    <div class="flex items-center gap-2">
                        <label for="leftNavToggleCheckbox" aria-label="왼쪽 네비게이션 열기/닫기"
                            class="p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
                            </svg>
                        </label>
                        <h1 id="mainTitle"
                            class="block text-xl font-bold latin-font text-neutral-900 dark:text-neutral-100">
                            Obsidian Knowledge Vault
                        </h1>
                    </div>

                    <!-- 오른쪽 아이콘 버튼 영역 -->
                    <div class="flex items-center gap-1 md:gap-2">

                        <!-- 본문 너비 조절 버튼 (태블릿/데스크탑 전용) -->
                        <button id="widthToggleBtn" aria-label="본문 너비 전환"
                            class="hidden md:flex p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M20 12H4m16 0l-4-4m4 4l-4 4M4 12l4-4M4 12l4 4" />
                            </svg>
                        </button>



                        <!-- 공유 버튼 -->
                        <button id="shareBtn" aria-label="페이지 공유"
                            class="flex p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8m-4-6l-4-4-4 4m4-4v13" />
                            </svg>
                        </button>

                        <!-- 우측 사이드바 토글 버튼 -->
                        <button id="rightSidebarToggle" aria-label="오른쪽 사이드바 열기/닫기"
                            class="p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">
                                </path>
                            </svg>
                        </button>

                    </div>
                </div>
            </header>

            <div class="flex flex-1 items-start">
                <!-- Main Content Area -->
                <main class="flex-1 transition-all duration-300 ease-in-out">
                    <div id="page-wrapper" class="w-full pt-6 pl-4 pr-4 md:pt-8 md:pl-8 md:pt-8 md:pr-8">
                        <div id="content-container" class="max-w-[76ch] mx-auto">
                            <article id="main-content-container">
                                <header>
                                    <h1 class="text-3xl font-bold mb-4 text-neutral-900 dark:text-neutral-100">
                                        여기에 페이지의 핵심 제목을 입력하세요
                                    </h1>
                                </header>

                                <section>
                                    <h2 class="text-2xl font-bold mb-4 text-neutral-900 dark:text-neutral-100">
                                        사이드바 동작 방식 안내
                                    </h2>
                                    <p class="mb-4 text-neutral-600 dark:text-neutral-400">
                                        이제 상단바와 우측 사이드바는 스크롤을 해도 제자리에 고정됩니다.
                                    </p>
                                    <p class="text-neutral-600 dark:text-neutral-400">
                                        <strong>- 데스크탑 (768px 이상):</strong> 우측 사이드바가 본문 옆에 고정되어 함께 스크롤됩니다.
                                    </p>
                                    <p class="text-neutral-600 dark:text-neutral-400">
                                        <strong>- 모바일 (768px 미만):</strong> 우측 상단 버튼 클릭 시, 사이드바가 컨텐츠 위를 '덮으며' 나타납니다.
                                    </p>
                                </section>

                                <section>
                                    <h2 class="text-2xl font-bold mb-4 text-neutral-900 dark:text-neutral-100">
                                        스크롤 테스트용 부제목
                                    </h2>
                                    <div class="h-96"></div>
                                    <p class="text-neutral-600 dark:text-neutral-400">
                                        스크롤 테스트용 컨텐츠입니다.
                                    </p>
                                    <div class="space-y-40">
                                        <p class="text-neutral-600 dark:text-neutral-400">...</p>
                                        <p class="text-neutral-600 dark:text-neutral-400">컨텐츠의 끝입니다.</p>
                                    </div>
                                </section>
                            </article>

                            <div id="comment"></div>

                            <footer
                                class="bg-neutral-100 dark:bg-neutral-900 p-4 border-t border-neutral-200 dark:border-neutral-800 mt-8">
                                <div class="max-w-[76ch] mx-auto flex justify-center items-center gap-4">
                                    <div class="relative" id="theme-switcher-container">
                                        <button title="Change theme" id="footer-theme-toggle"
                                            class="cursor-pointer rounded-md text-left font-medium h-7 px-2 text-xs text-neutral-600 transition-colors dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800"
                                            type="button" aria-label="Change theme">
                                            <div class="flex items-center gap-2 capitalize">
                                                <span id="theme-light-indicator" class="hidden items-center gap-2">
                                                    <svg height="12" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                                        stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                                                    </svg>
                                                    <span>Light</span>
                                                </span>
                                                <span id="theme-dark-indicator" class="hidden items-center gap-2">
                                                    <svg height="12" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                                        stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z" />
                                                    </svg>
                                                    <span>Dark</span>
                                                </span>
                                                <span id="theme-system-indicator" class="hidden items-center gap-2">
                                                    <svg height="12" viewBox="0 0 24 24" fill="currentColor">
                                                        <path
                                                            d="M11.996094 2C6.4986225 2.0192368 2.03125 6.5024993 2.03125 12c0 5.497501 4.4673725 9.980763 9.964844 10H12 12.0039c5.497471-.01924 9.964844-4.502499 9.964844-10 0-5.4975007-4.467373-9.9807632-9.964844-10H12zM12 4c4.417218.017598 7.96875 3.5822356 7.96875 8 0 4.417764-3.551532 7.982402-7.96875 8z" />
                                                    </svg>
                                                    <span>System</span>
                                                </span>
                                            </div>
                                        </button>
                                        <ul id="footer-theme-options"
                                            class="hidden absolute bottom-8 right-0 z-20 max-h-64 overflow-auto rounded-md ring-1 ring-black/5 bg-white py-1 text-sm shadow-lg dark:ring-white/20 dark:bg-neutral-800">
                                            <li>
                                                <p data-theme-value="light"
                                                    class="theme-option-button text-neutral-800 dark:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-700 relative cursor-pointer whitespace-nowrap py-1.5 transition-colors px-3">
                                                    Light</p>
                                            </li>
                                            <li>
                                                <p data-theme-value="dark"
                                                    class="theme-option-button text-neutral-800 dark:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-700 relative cursor-pointer whitespace-nowrap py-1.5 transition-colors px-3">
                                                    Dark</p>
                                            </li>
                                            <li>
                                                <p data-theme-value="system"
                                                    class="theme-option-button text-neutral-800 dark:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-700 relative cursor-pointer whitespace-nowrap py-1.5 transition-colors px-3">
                                                    System</p>
                                            </li>
                                        </ul>
                                    </div>
                                    <p class="text-sm text-neutral-600 dark:text-neutral-400">
                                        © 2024 Your Company. All rights reserved.
                                    </p>
                                    <a class="p-2 text-current" target=_blank rel=noreferrer
                                        href="https://github.com/shinnyeonki" title=GitHub><svg height="24"
                                            fill="currentColor" viewBox="3 3 18 18">
                                            <path
                                                d="M12 3C7.0275 3 3 7.12937 3 12.2276c0 4.0833 2.57625 7.5321 6.15374 8.7548C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441 9.77249 20.3249 9.76125 19.5982 9.76125 18.8254 7.5 19.2522 6.915 18.2602 6.735 17.7412 6.63375 17.4759 6.19499 16.6569 5.8125 16.4378 5.4975 16.2647 5.0475 15.838 5.80124 15.8264 6.51 15.8149 7.01625 16.4954 7.18499 16.7723 7.99499 18.1679 9.28875 17.7758 9.80625 17.5335 9.885 16.9337 10.1212 16.53 10.38 16.2993 8.3775 16.0687 6.285 15.2728 6.285 11.7432c0-1.0035.34875-1.834.92249-2.47994C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794c0 0 .753749999999999-.24223 2.47499.94583.72001-.20762 1.48501-.31143 2.25001-.31143C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377c1.7212-1.19959 2.475-.94583 2.475-.94583C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326 17.4113 9.9092 17.76 10.7281 17.76 11.7432c0 3.5411-2.1037 4.3255-4.1063 4.5561C13.98 16.5877 14.2613 17.1414 14.2613 18.0065 14.2613 19.2407 14.25 20.2326 14.25 20.5441 14.25 20.7863 14.4188 21.0746 14.8688 20.9824 16.6554 20.364 18.2079 19.1866 19.3078 17.6162c1.0999-1.5705 1.6917-3.4551 1.6922-5.3886C21 7.12937 16.9725 3 12 3z" />
                                        </svg>
                                    </a>
                                </div>
                            </footer>
                        </div>
                    </div>
                </main>

                <!-- 우측 사이드바 -->
                <aside id="right-sidebar-container" 
                        class="fixed top-14 right-0 z-40 h-[calc(100vh-3.5rem)] bg-white dark:bg-neutral-900 border-l border-neutral-200 dark:border-neutral-800 transition-all duration-300 ease-in-out translate-x-full
                            md:sticky md:top-14 md:h-[calc(100vh-3.5rem)] md:w-0 md:translate-x-0 md:bg-transparent dark:md:bg-transparent md:border-none
                            flex flex-col flex-shrink-0 overflow-hidden">
                    <div class="w-80 flex flex-col">
                        <!-- 탭 네비게이션 -->
                        <div role="tablist" aria-label="사이드바 컨텐츠" class="flex-shrink-0">
                            <nav class="flex -mb-px" aria-label="Tabs">
                                <button id="tab-toc" role="tab" aria-selected="true" aria-controls="panel-toc"
                                    class="right-tab-btn flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm border-neutral-800 dark:border-neutral-100 text-neutral-800 dark:text-neutral-100 latin-font font-bold">
                                    Toc
                                </button>
                                <button id="tab-metadata" role="tab" aria-selected="false"
                                    aria-controls="panel-metadata" tabindex="-1"
                                    class="right-tab-btn flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:border-neutral-400 latin-font font-bold">
                                    Metadata
                                </button>
                                <button id="tab-links" role="tab" aria-selected="false" aria-controls="panel-links"
                                    tabindex="-1"
                                    class="right-tab-btn flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:border-neutral-400 latin-font font-bold">
                                    Links
                                </button>
                            </nav>
                        </div>

                        <!-- 탭 컨텐츠 (이하 동일) -->
                        <div class="flex-grow overflow-hidden mt-2 md:border-l md:border-neutral-200 dark:md:border-neutral-800">
                            <div id="right-sidebar-track"
                                class="flex h-full transition-transform duration-300 ease-in-out">
                                <div id="panel-toc" role="tabpanel" aria-labelledby="tab-toc" tabindex="0"
                                    class="right-tab-content w-full flex-shrink-0 h-full overflow-y-auto p-2 text-sm text-slate-600 dark:text-neutral-300">
                                    <!-- 목차 내용 -->
                                    <ul>
                                        <li><a href="#"
                                                class="block p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800">1.
                                                소개</a></li>
                                        <li><a href="#"
                                                class="block p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800">2.
                                                주요 기능</a></li>
                                        <li><a href="#"
                                                class="block p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800">3.
                                                설치 방법</a></li>
                                        <li><a href="#"
                                                class="block p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800">4.
                                                결론</a></li>
                                    </ul>
                                </div>
                                <div id="panel-metadata" role="tabpanel" aria-labelledby="tab-metadata" tabindex="0"
                                    class="right-tab-content w-full flex-shrink-0 h-full overflow-y-auto p-2 text-sm text-slate-600 dark:text-neutral-300">
                                    메타 데이터 (구현 예정)
                                </div>
                                <div id="panel-links" role="tabpanel" aria-labelledby="tab-links" tabindex="0"
                                    class="right-tab-content w-full flex-shrink-0 h-full overflow-y-auto p-2 text-sm text-slate-600 dark:text-neutral-300">
                                    참조된 링크, 참조하는 링크 (구현 예정)
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ----------------------------
            // ------- 테마 전환기 로직 -------
            // ----------------------------
            const themeToggleBtn = document.getElementById('footer-theme-toggle');
            const themeOptions = document.getElementById('footer-theme-options');
            const themeOptionButtons = document.querySelectorAll('.theme-option-button');
            const lightIndicator = document.getElementById('theme-light-indicator');
            const darkIndicator = document.getElementById('theme-dark-indicator');
            const systemIndicator = document.getElementById('theme-system-indicator');

            function updateIndicator(theme) {
                [lightIndicator, darkIndicator, systemIndicator].forEach(el => {
                    el.classList.add('hidden');
                    el.classList.remove('flex');
                });

                if (theme === 'light') {
                    lightIndicator.classList.remove('hidden');
                    lightIndicator.classList.add('flex');
                } else if (theme === 'dark') {
                    darkIndicator.classList.remove('hidden');
                    darkIndicator.classList.add('flex');
                } else { // system
                    systemIndicator.classList.remove('hidden');
                    systemIndicator.classList.add('flex');
                }
            }

            function applyAndSaveTheme(theme) {
                if (theme === 'system') {
                    localStorage.removeItem('theme');
                    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                } else if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                } else { // light
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                }
                updateIndicator(theme);
            }

            themeToggleBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                themeOptions.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!themeToggleBtn.contains(e.target) && !themeOptions.contains(e.target)) {
                    themeOptions.classList.add('hidden');
                }
            });

            themeOptionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const theme = button.getAttribute('data-theme-value');
                    applyAndSaveTheme(theme);
                    themeOptions.classList.add('hidden');
                });
            });

            // Initial indicator state
            const savedTheme = localStorage.getItem('theme') || 'system';
            updateIndicator(savedTheme);

            // Listen for system theme changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (!('theme' in localStorage)) { // only if theme is 'system'
                    if (e.matches) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                }
            });
            // -----------------------------
            // ----- 우측 사이드바 토글 로직 -----
            // -----------------------------
            const rightSidebar = document.getElementById('right-sidebar-container');
            const rightSidebarToggle = document.getElementById('rightSidebarToggle');

            const isTabletOrLarger = () => window.innerWidth >= 768;

            rightSidebarToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                if (isTabletOrLarger()) {
                    // 데스크톱: 너비를 조절하여 push 효과를 줍니다.
                    rightSidebar.classList.toggle('md:w-80'); // 너비를 0에서 80로 또는 그 반대로 변경
                } else {
                    // 모바일: translate 속성을 변경하여 오버레이 효과를 줍니다.
                    rightSidebar.classList.toggle('translate-x-full');
                }
            });

            // --------------------------------
            // --- 우측 사이트바 내부 탭 전환 로직 ---
            // --------------------------------
            const tabs = document.querySelectorAll('.right-tab-btn');
            const track = document.getElementById('right-sidebar-track');
            const panels = document.querySelectorAll('.right-tab-content');
            const tabNameToIndex = {
                'tab-toc': 0,
                'tab-metadata': 1,
                'tab-links': 2,
            };

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 모든 탭의 활성 스타일 제거
                    tabs.forEach(t => {
                        t.setAttribute('aria-selected', 'false');
                        t.classList.remove('border-neutral-800', 'dark:border-neutral-100', 'text-neutral-800', 'dark:text-neutral-100');
                        t.classList.add('border-transparent', 'text-slate-500', 'hover:text-slate-700', 'hover:border-slate-300', 'dark:text-neutral-400', 'dark:hover:text-neutral-200', 'dark:hover:border-neutral-400');
                    });

                    // 클릭된 탭에 활성 스타일 적용
                    tab.setAttribute('aria-selected', 'true');
                    tab.classList.add('border-neutral-800', 'dark:border-neutral-100', 'text-neutral-800', 'dark:text-neutral-100');
                    tab.classList.remove('border-transparent', 'text-slate-500', 'hover:text-slate-700', 'hover:border-slate-300', 'dark:text-neutral-400', 'dark:hover:text-neutral-200', 'dark:hover:border-neutral-400');

                    // 콘텐츠 트랙을 해당 위치로 슬라이드
                    const tabIndex = tabNameToIndex[tab.id];
                    if (tabIndex !== undefined) {
                        track.style.transform = `translateX(-${tabIndex * 100}%)`;
                    }
                });
            });
        });
    </script>
</body>

</html>