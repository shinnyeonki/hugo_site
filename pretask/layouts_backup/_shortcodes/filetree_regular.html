{{ $path := .Get "path" }}
<div class="file-tree" style="border:1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
{{ if $path }}
  {{/* 경로가 지정된 경우 */}}
  {{ with .Site.GetPage $path }}
    <h4>'{{ $path }}' 하위 구조 (RegularPages)</h4>
    <ul>
      <li>
        📁 <a href="{{ .RelPermalink }}">{{ .Title }}</a> (시작 섹션)
        {{ partial "tree_regular.html" . }}
      </li>
    </ul>
  {{ else }}
    <p style="color: red;">오류: 경로 '{{ $path }}'를 찾을 수 없습니다.</p>
  {{ end }}
{{ else }}
  {{/* 경로가 지정되지 않은 경우 (전체 구조) */}}
  <h4>사이트 전체 구조 (RegularPages)</h4>
  <ul>
    {{/* 1. 최상위(root)에 있는 일반 페이지들 먼저 나열 */}}
    {{ range where .Site.RegularPages "Section" "" }}
      <li>📄 <a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
    {{ end }}

    {{/* 2. 최상위 섹션들을 순회하며 재귀 partial 호출 시작 */}}
    {{ range .Site.Sections }}
      <li>
        📁 <a href="{{ .RelPermalink }}">{{ .Title }}</a> (섹션)
        {{ partial "tree_regular.html" . }}
      </li>
    {{ end }}
  </ul>
{{ end }}
</div>