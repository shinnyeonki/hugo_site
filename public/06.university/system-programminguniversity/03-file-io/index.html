<!DOCTYPE html>

<html lang="ko-KR"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    
    
    
    <title>03 FILE IO | My Test Site</title>
    

    
    
    <meta name="description" content=" open() creat() close() read() write() lseek() Disk I/O efficiency dup(), dup2() stat(), fstat(), lstat() access() 파일 디스크립터 프로세스가 실행될때 기본적으로 여는 파일은 3개 …">

    
    
    <meta name="robots" content="index, follow">
    

    
    <link rel="canonical" href="http://localhost:1313/06.university/system-programminguniversity/03-file-io/">

    
    
    
    <meta property="og:title" content="03 FILE IO">
    <meta property="og:description" content=" open() creat() close() read() write() lseek() Disk I/O efficiency dup(), dup2() stat(), fstat(), lstat() access() 파일 디스크립터 프로세스가 실행될때 기본적으로 여는 파일은 3개 …">
    <meta property="og:url" content="http://localhost:1313/06.university/system-programminguniversity/03-file-io/">
    <meta property="og:site_name" content="My Test Site">
    
    <meta property="og:type" content="blog">
    

    
    
    

    
    
    
    <meta name="twitter:card" content="summary_large_image">
    
    <meta name="twitter:title" content="03 FILE IO">
    <meta name="twitter:description" content=" open() creat() close() read() write() lseek() Disk I/O efficiency dup(), dup2() stat(), fstat(), lstat() access() 파일 디스크립터 프로세스가 실행될때 기본적으로 여는 파일은 3개 …">
    

    
    
    

    
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>

</head><body>
    
     
    <header class="site-header">
        <div class="site-title">
            <a href="http://localhost:1313/">My Test Site</a>
        </div>
    </header>
    
    <nav class="site-nav">
        <ul>
            
        </ul>
    </nav>
    
    <main>
        
        
<article class="prose prose-sm lg:prose-base max-w-3xl mx-auto dk:prose-stone">
    <h1>03 FILE IO **page.html**</h1>
    <ol>
<li>open()</li>
<li>creat()</li>
<li>close()</li>
<li>read()</li>
<li>write()</li>
<li>lseek()</li>
<li>Disk</li>
<li>I/O efficiency</li>
<li>dup(), dup2()</li>
<li>stat(), fstat(), lstat()</li>
<li>access()</li>
</ol>
<blockquote>
<p>파일 디스크립터
프로세스가 실행될때 기본적으로 여는 파일은 3개 각각 0(STDIN), 1(STDOUT) ,2(STDERR)</p>
</blockquote>
<blockquote>
<p>man -s 2 open : 과 같이 메뉴얼 파일을 볼 수 있다</p>
</blockquote>
<h2 id="open">open</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">open</span> (<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>pathname, <span style="color:#66d9ef">int</span> flags);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">open</span> (<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>pathname, <span style="color:#66d9ef">int</span> flags, <span style="color:#66d9ef">mode_t</span> mode);
</span></span></code></pre></div><p>int open (const char *pathname, int flags);
int open (const char *pathname, int flags, mode_t mode);
파일 디스크립터 값을 반환 -1 은 실패</p>
<ul>
<li>
<p>flags : 파일을 열 때 취해지는 구체적 행동을 기술한다</p>
<ul>
<li>파일 엑세스 플레그(필수 플래그) : 1개 필수
<ul>
<li>O_RDONLY(00) : 읽기 모드 (파일 엑세스 플레그)</li>
<li>O_WRONLY(01) : 쓰기 모드 (파일 엑세스 플레그)</li>
<li>O_RDRW(02) : 읽기 쓰기 모드 (파일 엑세스 플레그)</li>
</ul>
</li>
<li>파일 생성 플래그 File Creation Flags (선택 플래그) : 생성과정에 영향
<ul>
<li>O_CREAT: 파일이 존재하지 않을 경우 새 파일을 생성합니다.</li>
<li>O_EXCL: <code>O_CREAT</code>와 함께 사용되며, 파일이 이미 존재하면 오류를 발생시킵니다. 이를 통해 파일의 중복 생성을 방지합니다.</li>
<li>O_TRUNC: 파일이 이미 존재할 경우, 파일 내용을 비웁니다.</li>
<li>O_CLOEXEC : 파일 디스크립터가 생성될 때, 해당 프로세스가 <code>exec()</code> 시스템 호출을 통해 새로운 프로그램으로 전환될 때 자동으로 닫히도록 설정</li>
<li>O_DIRECTORY : 이 플래그는 지정된 경로가 반드시 디렉토리여야 함을 나타냅니다. 만약 경로가 디렉토리가 아닐 경우, <code>open()</code> 호출은 실패합니다.</li>
<li>O_NOCTTY : 이 플래그는 열린 파일이 제어 터미널이 되지 않도록 합니다.</li>
<li>O_NOFOLLOW :  이 플래그는 심볼릭 링크를 따라가지 않도록 설정합니다. 만약 지정된 경로가 심볼릭 링크인 경우, open() 호출은 실패합니다.</li>
<li>O_TMPFILE : 이름 없는 임시 파일 생성</li>
</ul>
</li>
<li>파일 상태 플래그 (File Status Flags) (선택 플래그) :  파일이 열린 후의 I/O 동작에 영향을 미침
<ul>
<li>O_APPEND: 파일을 추가 모드로 열어, 매번 쓰기 전에 파일 끝으로 이동</li>
<li>O_ASYNC: 입출력이 가능할 때 SIGIO 신호를 생성하는 비동기 모드 활성화</li>
<li>O_DIRECT: 캐시 영향을 최소화한 I/O 수행</li>
<li>O_DSYNC: 데이터 일관성 보장 동기화 쓰기 모드</li>
<li>O_LARGEFILE: 큰 파일을 열 수 있도록 허용</li>
<li>O_NOATIME: 파일 접근 시간을 업데이트하지 않음</li>
<li>O_NONBLOCK: 비차단 모드로 파일 열기</li>
<li>O_PATH: 파일을 열지 않고 파일 디스크립터만 반환</li>
<li>O_SYNC: 파일 데이터와 메타데이터가 모두 동기화된 상태에서 쓰기 완료</li>
<li>&hellip; 등등</li>
</ul>
</li>
</ul>
</li>
<li>
<p>모드 : mode_t = unsigned int (/usr/include/sys/types.h 에 선언되어 있음)</p>
<ul>
<li>Flag에 O_CREAT를 지정한 경우에만 필요</li>
<li>0-8비트는 파일의 보호모드 9-11 비트는 sticky 비트 공유모드
        <img src="/08.media/20240927014702.png" alt=" (Image resource not found)" ></li>
<li><strong>S_IRUSR</strong> (읽기 권한, 소유자): 소유자에게 읽기 권한 부여</li>
<li><strong>S_IWUSR</strong> (쓰기 권한, 소유자): 소유자에게 쓰기 권한 부여</li>
<li><strong>S_IXUSR</strong> (실행 권한, 소유자): 소유자에게 실행 권한 부여</li>
<li><strong>S_IRGRP</strong> (읽기 권한, 그룹): 그룹에게 읽기 권한 부여</li>
<li><strong>S_IWGRP</strong> (쓰기 권한, 그룹): 그룹에게 쓰기 권한 부여</li>
<li><strong>S_IXGRP</strong> (실행 권한, 그룹): 그룹에게 실행 권한 부여</li>
<li><strong>S_IROTH</strong> (읽기 권한, 기타): 기타 사용자에게 읽기 권한 부여</li>
<li><strong>S_IWOTH</strong> (쓰기 권한, 기타): 기타 사용자에게 쓰기 권한 부여</li>
<li><strong>S_IXOTH</strong> (실행 권한, 기타): 기타 사용자에게 실행 권한 부여</li>
<li><strong>S_ISUID</strong> (셋 사용자 ID 비트): 셋 사용자 ID 비트 설정</li>
<li><strong>S_ISGID</strong> (셋 그룹 ID 비트): 셋 그룹 ID 비트 설정</li>
<li><strong>S_ISVTX</strong> (스티키 비트): 스티키 비트 설정</li>
</ul>
</li>
</ul>
<h2 id="create">create</h2>
<p><code> int creat(const char *pathname, mode_t mode);</code></p>
<ul>
<li>creat( pathname, mode );</li>
<li>open ( pathname, O_WRONLY | O_CREAT | O_TRUNC, mode);</li>
<li>2개는 기능이 동일</li>
<li>이때 소유자 모드는 변경하지 않는다</li>
</ul>
<h2 id="close">close</h2>
<p>열린 파일 닫기</p>
<h2 id="read">read</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">ssize_t</span>  <span style="color:#a6e22e">read</span> (<span style="color:#66d9ef">int</span> filedes,  <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>buf,  <span style="color:#66d9ef">size_t</span> nbytes);
</span></span></code></pre></div><ul>
<li>buf 읽은 데이터를 담을 메모리의 시작 주소</li>
<li>nbytes 읽을 바이트 수</li>
</ul>
<h2 id="write">write</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">ssize_t</span>  <span style="color:#a6e22e">write</span> (<span style="color:#66d9ef">int</span> filedes, <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>buf, <span style="color:#66d9ef">size_t</span> nbytes);
</span></span></code></pre></div><ul>
<li>read 와 반대
copy.c</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"></code></pre></div><h2 id="lseek">lseek</h2>

</article>


        
        <footer class="site-footer">
            
            <address>
                
            </address>
            <p>&copy; 2025 My Test Site. All rights reserved.</p>
        </footer>
    </main>

    
    <aside class="sidebar">
        <h3>최근 글</h3>
        <ul>
            
            <li><a href="http://localhost:1313/02.inbox/di-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-%EC%9D%98-%ED%83%80-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EC%A0%91%EA%B7%BC-%EC%9C%A0%ED%8A%9C%EB%B8%8C-%EB%8C%93%EA%B8%80/">di (의존성 주입) 의 타 프레임워크 접근 유튜브 댓글</a></li>
            
            <li><a href="http://localhost:1313/%EB%AC%B4%EC%A0%9C-12/">무제 12</a></li>
            
            <li><a href="http://localhost:1313/temp/tmux/">tmux</a></li>
            
            <li><a href="http://localhost:1313/02.inbox/doxyzen-%ED%82%A4%EC%9B%8C%EB%93%9C/">Doxyzen 키워드</a></li>
            
            <li><a href="http://localhost:1313/university-algorizm/">university algorizm</a></li>
            
        </ul>

        <h3>태그</h3>
        
        
    </aside>
</body>
</html>