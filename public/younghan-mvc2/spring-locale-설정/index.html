<!DOCTYPE html>

<html lang="en-US"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    
    
    
    <title>spring locale 설정 | My Test Site</title>
    

    
    
    <meta name="description" content="spring locale 설정 질문 build.gradle
// 모든 Java 작업에 한국어 로케일 설정 적용 tasks.withType(JavaForkOptions) { // 모든 JVM 포크 작업(test, bootRun 등)에 적용 systemProperty …">

    
    
    <meta name="robots" content="index, follow">
    

    
    <link rel="canonical" href="http://localhost:1313/younghan-mvc2/spring-locale-%EC%84%A4%EC%A0%95/">

    
    
    
    <meta property="og:title" content="spring locale 설정">
    <meta property="og:description" content="spring locale 설정 질문 build.gradle
// 모든 Java 작업에 한국어 로케일 설정 적용 tasks.withType(JavaForkOptions) { // 모든 JVM 포크 작업(test, bootRun 등)에 적용 systemProperty …">
    <meta property="og:url" content="http://localhost:1313/younghan-mvc2/spring-locale-%EC%84%A4%EC%A0%95/">
    <meta property="og:site_name" content="My Test Site">
    
    <meta property="og:type" content="blog">
    

    
    
    

    
    
    
    <meta name="twitter:card" content="summary_large_image">
    
    <meta name="twitter:title" content="spring locale 설정">
    <meta name="twitter:description" content="spring locale 설정 질문 build.gradle
// 모든 Java 작업에 한국어 로케일 설정 적용 tasks.withType(JavaForkOptions) { // 모든 JVM 포크 작업(test, bootRun 등)에 적용 systemProperty …">
    

    
    
    

    
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>

</head><body>
    
     
    <header class="site-header">
        <div class="site-title">
            <a href="http://localhost:1313/">My Test Site</a>
        </div>
    </header>
    
    <nav class="site-nav">
        <ul>
            
        </ul>
    </nav>
    
    <main>
        
        
<article class="prose prose-sm lg:prose-base max-w-3xl mx-auto dk:prose-stone">
    <h1>spring locale 설정 **page.html**</h1>
    <h1 id="spring-locale-설정">spring locale 설정</h1>
<h3 id="질문">질문</h3>
<p><code>build.gradle</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 모든 Java 작업에 한국어 로케일 설정 적용</span>
</span></span><span style="display:flex;"><span>tasks.<span style="color:#a6e22e">withType</span>(JavaForkOptions) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 모든 JVM 포크 작업(test, bootRun 등)에 적용</span>
</span></span><span style="display:flex;"><span>    systemProperty <span style="color:#960050;background-color:#1e0010">&#39;</span>user.<span style="color:#a6e22e">language</span><span style="color:#960050;background-color:#1e0010">&#39;</span>, <span style="color:#960050;background-color:#1e0010">&#39;</span>ko<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>    systemProperty <span style="color:#960050;background-color:#1e0010">&#39;</span>user.<span style="color:#a6e22e">country</span><span style="color:#960050;background-color:#1e0010">&#39;</span>, <span style="color:#960050;background-color:#1e0010">&#39;</span>KR<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Java 컴파일 작업에도 동일한 설정</span>
</span></span><span style="display:flex;"><span>tasks.<span style="color:#a6e22e">withType</span>(JavaCompile) {
</span></span><span style="display:flex;"><span>    options.<span style="color:#a6e22e">fork</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    options.<span style="color:#a6e22e">forkOptions</span>.<span style="color:#a6e22e">jvmArgs</span> <span style="color:#f92672">+=</span> <span style="color:#f92672">[</span><span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">-</span>Duser.<span style="color:#a6e22e">language</span><span style="color:#f92672">=</span>ko<span style="color:#960050;background-color:#1e0010">&#39;</span>, <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">-</span>Duser.<span style="color:#a6e22e">country</span><span style="color:#f92672">=</span>KR<span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>질문의 내용을 null값으로 주게 되면 시스템 os locale 을 찾는다고 했는데 실제 제대로 적용되지 않는 상황인것 같습니다<br>
저는 linux에서 개발환경구성되어 있는데<br>
linux 에서 지역 locale 을 쓰지 않고 중립 locale<code>LANG=C.UTF-8</code> 을 씁니다 그래서 저도 동일한 문제가 발생하였습니다</p>
<p> 다음 3가지 접근법이 제가 알고 있는 접근법 입니다</p>
<ol>
<li>
<p>운영체제 locale 변경(질문에 내용에 해당되지 않음)</p>
</li>
<li>
<p>jvm locale 변경<code>-Duser.language=ko -Duser.country=KR</code> 이전 댓글의 내용 동일</p>
</li>
<li>
<p>빌드 설정 처음의 요약과 동일</p>
</li>
<li>
<p>코드를 수정</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@BeforeAll</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setUpLocale</span>() {
</span></span><span style="display:flex;"><span>    Locale.<span style="color:#a6e22e">setDefault</span>(Locale.<span style="color:#a6e22e">KOREA</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ol>
<h3 id="spring-mvc-프로젝트에서-gradle을-활용한-일관된-로케일-설정">Spring MVC 프로젝트에서 Gradle을 활용한 일관된 로케일 설정</h3>
<p>사용자는 IntelliJ IDEA에서 기본 로케일이 <code>en-US</code>로 표시되는 반면, 운영 체제의 로케일은 한국어로 설정되어 있는 문제를 보고했습니다. 이로 인해 Spring MVC 애플리케이션이 <code>null</code> 로케일이 주어졌을 때 영어 리소스 번들을 기본적으로 선택하는 문제가 발생했습니다. 반면, <code>ko_KR</code> 로케일을 명시적으로 설정했을 때는 애플리케이션이 정상적으로 동작함을 확인했습니다.</p>
<p>이에 따라 사용자는 Gradle 빌드 과정에서 테스트 및 컴파일 단계에서 한국어 로케일을 강제하도록 설정하는 Gradle 구성 스니펫을 제공하였으며, 이에 대한 자세한 설명을 요청했습니다. 본 보고서는 이러한 Gradle 설정의 목적과 기능을 설명하고, IntelliJ와 Gradle 간의 로케일 불일치 문제를 해결하는 방법을 다룹니다.</p>
<hr>
<h3 id="1-gradle과-작업task-개념">1. Gradle과 작업(Task) 개념</h3>
<p>Gradle은 강력한 빌드 자동화 도구로, 작업(Task)이라는 개념을 중심으로 동작합니다. 작업(Task)은 소스 코드 컴파일, 테스트 실행, 문서 생성, 애플리케이션 패키징 등의 독립적인 단위로 구성됩니다. 이러한 작업은 Gradle 빌드 스크립트(<code>build.gradle</code> 또는 <code>build.gradle.kts</code>)에서 정의되며, 플러그인을 적용하여 추가적인 작업을 확장할 수도 있습니다.</p>
<p>예를 들어, <code>Java</code> 플러그인을 적용하면 다음과 같은 작업이 자동으로 추가됩니다.</p>
<ul>
<li>
<p><code>compileJava</code> : Java 소스 코드 컴파일</p>
</li>
<li>
<p><code>test</code> : 테스트 실행</p>
</li>
<li>
<p><code>jar</code> : JAR 파일 생성</p>
</li>
</ul>
<p>Gradle에서 실행 가능한 모든 작업 목록을 확인하려면 프로젝트의 루트 디렉터리에서 다음 명령어를 실행할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>./gradlew tasks
</span></span></code></pre></div><hr>
<h3 id="2-jvm-프로세스-분리forking와-gradle-설정">2. JVM 프로세스 분리(Forking)와 Gradle 설정</h3>
<p>Gradle에서는 특정 작업을 수행할 때 별도의 JVM 프로세스를 실행(포크, Forking)할 수 있습니다. 이러한 작업에는 주로 <strong>테스트 실행</strong>(<code>Test</code>), <strong>Java 코드 실행</strong>(<code>JavaExec</code>), 그리고 <strong>Java 코드 컴파일</strong>(<code>JavaCompile</code>)이 포함됩니다.</p>
<p>JVM을 포크하는 이유는 다음과 같습니다.</p>
<ul>
<li>빌드 프로세스와 개별 작업을 격리하여 안정성 확보</li>
<li>특정 JVM 설정(메모리 크기, 시스템 속성 등)을 독립적으로 적용</li>
<li>테스트 작업 병렬 실행을 통해 빌드 속도 향상</li>
</ul>
<p>Gradle에서는 <code>JavaForkOptions</code> 인터페이스를 사용하여 포크된 JVM에 다양한 설정을 적용할 수 있습니다. 대표적으로 <code>Test</code> 및 <code>JavaExec</code> 작업은 <code>JavaForkOptions</code>을 구현하며, <code>JavaCompile</code> 작업도 설정에 따라 JVM을 포크할 수 있습니다.</p>
<hr>
<h3 id="3-gradle-설정-코드-분석">3. Gradle 설정 코드 분석</h3>
<h4 id="1-테스트-및-실행-작업에-대한-로케일-설정">(1) 테스트 및 실행 작업에 대한 로케일 설정</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>tasks.<span style="color:#a6e22e">withType</span>(JavaForkOptions) {
</span></span><span style="display:flex;"><span>    systemProperty <span style="color:#960050;background-color:#1e0010">&#39;</span>user.<span style="color:#a6e22e">language</span><span style="color:#960050;background-color:#1e0010">&#39;</span>, <span style="color:#960050;background-color:#1e0010">&#39;</span>ko<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>    systemProperty <span style="color:#960050;background-color:#1e0010">&#39;</span>user.<span style="color:#a6e22e">country</span><span style="color:#960050;background-color:#1e0010">&#39;</span>, <span style="color:#960050;background-color:#1e0010">&#39;</span>KR<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="설명"><strong>설명</strong></h5>
<ul>
<li><code>tasks.withType(JavaForkOptions) {...}</code>
<ul>
<li>Gradle의 <code>TaskContainer</code>에서 <code>JavaForkOptions</code>을 구현하는 작업만 선택</li>
<li>대표적으로 <code>Test</code> 및 <code>JavaExec</code> 작업이 포함됨</li>
</ul>
</li>
<li><code>systemProperty 'user.language', 'ko'</code>
<ul>
<li>JVM 시스템 속성 <code>user.language</code>를 <code>ko</code>(한국어)로 설정</li>
</ul>
</li>
<li><code>systemProperty 'user.country', 'KR'</code>
<ul>
<li>JVM 시스템 속성 <code>user.country</code>를 <code>KR</code>(대한민국)로 설정</li>
</ul>
</li>
</ul>
<p><strong>결과:</strong></p>
<ul>
<li>Gradle이 테스트(<code>Test</code>) 또는 Java 실행(<code>JavaExec</code>)을 수행할 때, JVM의 기본 로케일이 <code>ko_KR</code>로 설정됨</li>
<li>애플리케이션이 <code>null</code> 로케일을 받을 때 한국어 리소스 번들을 선택하도록 강제됨</li>
</ul>
<hr>
<h4 id="2-java-컴파일-작업에-대한-로케일-설정">(2) Java 컴파일 작업에 대한 로케일 설정</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gradle" data-lang="gradle"><span style="display:flex;"><span>tasks<span style="color:#f92672">.</span><span style="color:#a6e22e">withType</span><span style="color:#f92672">(</span>JavaCompile<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    options<span style="color:#f92672">.</span><span style="color:#a6e22e">fork</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    options<span style="color:#f92672">.</span><span style="color:#a6e22e">forkOptions</span><span style="color:#f92672">.</span><span style="color:#a6e22e">jvmArgs</span> <span style="color:#f92672">+=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;-Duser.language=ko&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;-Duser.country=KR&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h5 id="설명-1"><strong>설명</strong></h5>
<ul>
<li><code>tasks.withType(JavaCompile) {...}</code>
<ul>
<li>Gradle의 <code>JavaCompile</code> 작업에만 설정 적용</li>
</ul>
</li>
<li><code>options.fork = true</code>
<ul>
<li>Java 컴파일러(<code>javac</code>)를 별도의 JVM 프로세스에서 실행하도록 설정</li>
</ul>
</li>
<li><code>options.forkOptions.jvmArgs += [&quot;-Duser.language=ko&quot;, &quot;-Duser.country=KR&quot;]</code>
<ul>
<li>포크된 JVM에 <code>user.language</code> 및 <code>user.country</code> 시스템 속성 추가</li>
</ul>
</li>
</ul>
<p><strong>결과:</strong></p>
<ul>
<li>Java 코드 컴파일(<code>javac</code>)이 한국어 로케일에서 수행됨</li>
<li>만약 어노테이션 프로세서 또는 코드 생성이 로케일에 따라 다른 결과를 생성한다면, 이를 한국어 기준으로 일관되게 유지할 수 있음</li>
</ul>
<hr>
<h3 id="4-intellij-idea와-gradle의-로케일-불일치-문제">4. IntelliJ IDEA와 Gradle의 로케일 불일치 문제</h3>
<p>IntelliJ IDEA는 자체 설정에서 기본 로케일을 관리하기 때문에, 운영 체제의 로케일과 일치하지 않을 수 있습니다.</p>
<ul>
<li>IntelliJ에서 실행되는 JVM과 Gradle이 실행하는 JVM은 독립적으로 동작</li>
<li>IntelliJ는 기본적으로 <code>en-US</code> 로케일을 사용할 수 있음</li>
<li>Gradle은 OS 설정을 직접 따르지 않고, 명시적으로 설정된 로케일을 사용</li>
</ul>
<p>이러한 차이점 때문에 Gradle 빌드가 IntelliJ의 로케일과 다르게 동작할 수 있습니다. 이를 해결하려면 Gradle 설정을 명확하게 지정해야 합니다.</p>
<hr>
<h3 id="5-로케일-설정을-더욱-유연하게-관리하는-방법">5. 로케일 설정을 더욱 유연하게 관리하는 방법</h3>
<p>Gradle 속성(<code>gradle.properties</code>) 또는 환경 변수를 활용하여 로케일 설정을 변경할 수 있습니다.</p>
<h4 id="1"><strong>(1) <code>gradle.properties</code> 파일에 설정 추가</strong></h4>
<p><code>gradle.properties</code> (프로젝트 루트에 위치)</p>
<pre tabindex="0"><code>userLanguage=ko
userCountry=KR
</code></pre><h4 id="2"><strong>(2) <code>build.gradle</code>에서 Gradle 속성 적용</strong></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gradle" data-lang="gradle"><span style="display:flex;"><span>tasks<span style="color:#f92672">.</span><span style="color:#a6e22e">withType</span><span style="color:#f92672">(</span>JavaForkOptions<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    systemProperty <span style="color:#e6db74">&#39;user.language&#39;</span><span style="color:#f92672">,</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">properties</span><span style="color:#f92672">[</span><span style="color:#e6db74">&#39;userLanguage&#39;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    systemProperty <span style="color:#e6db74">&#39;user.country&#39;</span><span style="color:#f92672">,</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">properties</span><span style="color:#f92672">[</span><span style="color:#e6db74">&#39;userCountry&#39;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tasks<span style="color:#f92672">.</span><span style="color:#a6e22e">withType</span><span style="color:#f92672">(</span>JavaCompile<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    options<span style="color:#f92672">.</span><span style="color:#a6e22e">fork</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    options<span style="color:#f92672">.</span><span style="color:#a6e22e">forkOptions</span><span style="color:#f92672">.</span><span style="color:#a6e22e">jvmArgs</span> <span style="color:#f92672">+=</span> <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;-Duser.language=${project.properties[&#39;userLanguage&#39;]}&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;-Duser.country=${project.properties[&#39;userCountry&#39;]}&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><strong>장점:</strong></p>
<ul>
<li>
<p>필요에 따라 <code>gradle.properties</code> 파일에서 로케일을 쉽게 변경 가능</p>
</li>
<li>
<p>다양한 환경(OS, 개발자 설정)에서 유연하게 적용 가능</p>
</li>
</ul>
<hr>
<h3 id="6-결론-및-권장-사항">6. 결론 및 권장 사항</h3>
<p>✅ <strong>Gradle 설정 유지:</strong><br>
테스트 및 컴파일 단계에서 일관된 한국어 로케일을 강제하기 위해 제공된 Gradle 설정을 유지하는 것이 좋습니다.</p>
<p>✅ <strong>애플리케이션 실행 시 로케일 확인:</strong><br>
Spring Boot의 <code>bootRun</code> 작업을 실행할 때도 한국어 로케일을 적용해야 할 수 있습니다. IntelliJ의 <strong>Run Configuration</strong>에서 VM 옵션을 설정하는 것이 도움이 될 수 있습니다.</p>
<p>✅ <strong>환경별 로케일 변경 고려:</strong><br>
Gradle 속성(<code>gradle.properties</code>) 또는 환경 변수를 활용하여 필요에 따라 로케일을 변경할 수 있도록 설정하는 것이 좋습니다.</p>
<p>✅ <strong>운영 환경 고려:</strong><br>
최종 애플리케이션이 배포되는 환경에서도 로케일 설정을 고려해야 합니다. OS의 기본 로케일이 애플리케이션 실행 시 영향을 줄 수 있습니다.</p>

</article>


        
        <footer class="site-footer">
            
            <address>
                
            </address>
            <p>&copy; 2025 My Test Site. All rights reserved.</p>
        </footer>
    </main>

    
    <aside class="sidebar">
        <h3>최근 글</h3>
        <ul>
            
            <li><a href="http://localhost:1313/signal-%EC%B0%A8%EC%9D%B4-unixmacos-vs-linux/">signal 차이 unix(macos) vs linux</a></li>
            
            <li><a href="http://localhost:1313/02.inbox/doxyzen-%ED%82%A4%EC%9B%8C%EB%93%9C/">Doxyzen 키워드</a></li>
            
            <li><a href="http://localhost:1313/02.inbox/%EB%B0%B1%EC%97%94%EB%93%9C-%EA%B5%AC%EC%A1%B0-%EB%B3%80%ED%99%94-%EC%97%AD%EC%82%AC/">백엔드 구조 변화 역사</a></li>
            
            <li><a href="http://localhost:1313/%EC%BD%94%EC%96%B4-%EB%8D%A4%ED%94%84core-dump/">코어 덤프(Core Dump)</a></li>
            
            <li><a href="http://localhost:1313/copilot/copilot-custom-prompts/translate-to-chinese/">Translate to Chinese</a></li>
            
        </ul>

        <h3>태그</h3>
        
        
    </aside>
</body>
</html>