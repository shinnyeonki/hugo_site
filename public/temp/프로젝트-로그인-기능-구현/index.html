<!DOCTYPE html>

<html lang="ko-KR"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    
    
    
    <title>프로젝트 로그인 기능 구현 | My Test Site</title>
    

    
    
    <meta name="description" content="/test/employee 뷰를 특정 역할을 가진 로그인된 사용자만 접근할 수 있도록 하려면 인증 및 권한 부여를 구현해야 합니다. 이를 위해 Flask-Login과 역할 기반 액세스 제어(RBAC)를 사용할 수 있습니다.
단계별 가이드: Flask-Login 설치 및 …">

    
    
    <meta name="robots" content="index, follow">
    

    
    <link rel="canonical" href="http://localhost:1313/temp/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84/">

    
    
    
    <meta property="og:title" content="프로젝트 로그인 기능 구현">
    <meta property="og:description" content="/test/employee 뷰를 특정 역할을 가진 로그인된 사용자만 접근할 수 있도록 하려면 인증 및 권한 부여를 구현해야 합니다. 이를 위해 Flask-Login과 역할 기반 액세스 제어(RBAC)를 사용할 수 있습니다.
단계별 가이드: Flask-Login 설치 및 …">
    <meta property="og:url" content="http://localhost:1313/temp/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84/">
    <meta property="og:site_name" content="My Test Site">
    
    <meta property="og:type" content="blog">
    

    
    
    

    
    
    
    <meta name="twitter:card" content="summary_large_image">
    
    <meta name="twitter:title" content="프로젝트 로그인 기능 구현">
    <meta name="twitter:description" content="/test/employee 뷰를 특정 역할을 가진 로그인된 사용자만 접근할 수 있도록 하려면 인증 및 권한 부여를 구현해야 합니다. 이를 위해 Flask-Login과 역할 기반 액세스 제어(RBAC)를 사용할 수 있습니다.
단계별 가이드: Flask-Login 설치 및 …">
    

    
    
    

    
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>

</head><body>
    
     
    <header class="site-header">
        <div class="site-title">
            <a href="http://localhost:1313/">My Test Site</a>
        </div>
    </header>
    
    <nav class="site-nav">
        <ul>
            
        </ul>
    </nav>
    
    <main>
        
        
<article class="prose prose-sm lg:prose-base max-w-3xl mx-auto dk:prose-stone">
    <h1>프로젝트 로그인 기능 구현 **page.html**</h1>
    <p><code>/test/employee</code> 뷰를 특정 역할을 가진 로그인된 사용자만 접근할 수 있도록 하려면 인증 및 권한 부여를 구현해야 합니다. 이를 위해 Flask-Login과 역할 기반 액세스 제어(RBAC)를 사용할 수 있습니다.</p>
<h2 id="단계별-가이드">단계별 가이드:</h2>
<ol>
<li><strong>Flask-Login 설치 및 설정</strong></li>
<li><strong>사용자 모델 생성 및 역할 추가</strong></li>
<li><strong>로그인 및 로그아웃 기능 구현</strong></li>
<li><strong>접근 제한 데코레이터 작성</strong></li>
<li><strong>employee 뷰 보호</strong></li>
</ol>
<h2 id="1-flask-login-설치-및-설정">1. Flask-Login 설치 및 설정</h2>
<p>먼저 Flask-Login을 설치합니다:
<code>pip install flask-login</code>
<code>app.py</code>에서 Flask-Login을 설정합니다:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> flask <span style="color:#f92672">import</span> Flask
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> flask_login <span style="color:#f92672">import</span> LoginManager
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create_app</span>():
</span></span><span style="display:flex;"><span>    app <span style="color:#f92672">=</span> Flask(__name__)
</span></span><span style="display:flex;"><span>    app<span style="color:#f92672">.</span>secret_key <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>urandom(<span style="color:#ae81ff">24</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Initialize the database</span>
</span></span><span style="display:flex;"><span>    init_db(app)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Initialize Flask-Login</span>
</span></span><span style="display:flex;"><span>    login_manager <span style="color:#f92672">=</span> LoginManager()
</span></span><span style="display:flex;"><span>    login_manager<span style="color:#f92672">.</span>login_view <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;auth.login&#39;</span>
</span></span><span style="display:flex;"><span>    login_manager<span style="color:#f92672">.</span>init_app(app)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Register blueprints</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">from</span> auth <span style="color:#f92672">import</span> auth <span style="color:#66d9ef">as</span> auth_blueprint
</span></span><span style="display:flex;"><span>    app<span style="color:#f92672">.</span>register_blueprint(auth_blueprint)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">import</span> views
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">import</span> test_views
</span></span><span style="display:flex;"><span>    app<span style="color:#f92672">.</span>register_blueprint(views<span style="color:#f92672">.</span>main)
</span></span><span style="display:flex;"><span>    app<span style="color:#f92672">.</span>register_blueprint(test_views<span style="color:#f92672">.</span>test)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> app
</span></span></code></pre></div><h2 id="2-사용자-모델-생성-및-역할-추가">2. 사용자 모델 생성 및 역할 추가</h2>
<p>사용자 정보를 저장하고 역할을 관리하기 위한 모델을 생성합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> flask_login <span style="color:#f92672">import</span> UserMixin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>(UserMixin):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__init__</span>(self, id, username, role):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>id <span style="color:#f92672">=</span> id
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>username <span style="color:#f92672">=</span> username
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>role <span style="color:#f92672">=</span> role
</span></span></code></pre></div><p>사용자 정보를 데이터베이스에서 가져오는 함수도 필요합니다:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> flask_login <span style="color:#f92672">import</span> LoginManager
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> models <span style="color:#f92672">import</span> User
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>login_manager <span style="color:#f92672">=</span> LoginManager()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@login_manager.user_loader</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">load_user</span>(user_id):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 데이터베이스에서 사용자 정보 가져오기</span>
</span></span><span style="display:flex;"><span>    cursor <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>db<span style="color:#f92672">.</span>cursor()
</span></span><span style="display:flex;"><span>    cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;SELECT id, username, role FROM users WHERE id = :id&#34;</span>, {<span style="color:#e6db74">&#39;id&#39;</span>: user_id})
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchone()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> result:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> User(id<span style="color:#f92672">=</span>result[<span style="color:#ae81ff">0</span>], username<span style="color:#f92672">=</span>result[<span style="color:#ae81ff">1</span>], role<span style="color:#f92672">=</span>result[<span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>
</span></span></code></pre></div><h2 id="3-로그인-및-로그아웃-기능-구현">3. 로그인 및 로그아웃 기능 구현</h2>
<p><code>auth</code> 블루프린트를 생성하여 인증 관련 뷰를 관리합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> flask <span style="color:#f92672">import</span> Blueprint, render_template, redirect, url_for, request, flash
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> flask_login <span style="color:#f92672">import</span> login_user, logout_user
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> models <span style="color:#f92672">import</span> User
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>auth <span style="color:#f92672">=</span> Blueprint(<span style="color:#e6db74">&#39;auth&#39;</span>, __name__)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@auth.route</span>(<span style="color:#e6db74">&#39;/login&#39;</span>, methods<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;GET&#39;</span>, <span style="color:#e6db74">&#39;POST&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">login</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;POST&#39;</span>:
</span></span><span style="display:flex;"><span>        username <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>form[<span style="color:#e6db74">&#39;username&#39;</span>]
</span></span><span style="display:flex;"><span>        password <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>form[<span style="color:#e6db74">&#39;password&#39;</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># 데이터베이스에서 사용자 인증</span>
</span></span><span style="display:flex;"><span>        cursor <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>db<span style="color:#f92672">.</span>cursor()
</span></span><span style="display:flex;"><span>        cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;SELECT id, username, role FROM users WHERE username = :username AND password = :password&#34;</span>, {<span style="color:#e6db74">&#39;username&#39;</span>: username, <span style="color:#e6db74">&#39;password&#39;</span>: password})
</span></span><span style="display:flex;"><span>        result <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchone()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> result:
</span></span><span style="display:flex;"><span>            user <span style="color:#f92672">=</span> User(id<span style="color:#f92672">=</span>result[<span style="color:#ae81ff">0</span>], username<span style="color:#f92672">=</span>result[<span style="color:#ae81ff">1</span>], role<span style="color:#f92672">=</span>result[<span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span>            login_user(user)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> redirect(url_for(<span style="color:#e6db74">&#39;test.employee&#39;</span>))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            flash(<span style="color:#e6db74">&#39;Invalid credentials&#39;</span>, <span style="color:#e6db74">&#39;error&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render_template(<span style="color:#e6db74">&#39;login.html&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@auth.route</span>(<span style="color:#e6db74">&#39;/logout&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">logout</span>():
</span></span><span style="display:flex;"><span>    logout_user()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> redirect(url_for(<span style="color:#e6db74">&#39;auth.login&#39;</span>))
</span></span></code></pre></div><h2 id="4-접근-제한-데코레이터-작성">4. 접근 제한 데코레이터 작성</h2>
<p>특정 역할을 가진 사용자만 접근할 수 있도록 데코레이터를 작성합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> flask <span style="color:#f92672">import</span> redirect, url_for, flash
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> flask_login <span style="color:#f92672">import</span> current_user
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> functools <span style="color:#f92672">import</span> wraps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">role_required</span>(role):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">wrapper</span>(f):
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">@wraps</span>(f)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">decorated_function</span>(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> current_user<span style="color:#f92672">.</span>is_authenticated:
</span></span><span style="display:flex;"><span>                flash(<span style="color:#e6db74">&#39;You need to be logged in to access this page.&#39;</span>, <span style="color:#e6db74">&#39;error&#39;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> redirect(url_for(<span style="color:#e6db74">&#39;auth.login&#39;</span>))
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> current_user<span style="color:#f92672">.</span>role <span style="color:#f92672">!=</span> role:
</span></span><span style="display:flex;"><span>                flash(<span style="color:#e6db74">&#39;You do not have permission to access this page.&#39;</span>, <span style="color:#e6db74">&#39;error&#39;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> redirect(url_for(<span style="color:#e6db74">&#39;auth.login&#39;</span>))
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> f(<span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> decorated_function
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> wrapper
</span></span></code></pre></div><h2 id="5employee뷰-보호">5. employee 뷰 보호</h2>
<p>employee 뷰에 데코레이터를 적용하여 역할 기반 접근을 제어합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> decorators <span style="color:#f92672">import</span> role_required
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> flask_login <span style="color:#f92672">import</span> login_required
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@test.route</span>(<span style="color:#e6db74">&#39;/test/employee&#39;</span>, methods<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;GET&#39;</span>, <span style="color:#e6db74">&#39;POST&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@login_required</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@role_required</span>(<span style="color:#e6db74">&#39;2&#39;</span>)  <span style="color:#75715e"># &#39;2&#39;가 경영관리 직원의 역할 코드라고 가정</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">employee</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 기존 코드 그대로</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span></code></pre></div><h2 id="추가-사항">추가 사항</h2>
<ul>
<li><strong>데이터베이스에 사용자 및 역할 테이블 추가</strong>: 사용자 정보를 저장하기 위한 테이블을 데이터베이스에 생성해야 합니다.</li>
<li><strong>비밀번호 보안 처리</strong>: 실제로는 비밀번호를 평문으로 저장하지 않고 해싱하여 저장해야 합니다.</li>
<li><strong>로그인 템플릿 작성</strong>: <code>login.html</code> 템플릿을 생성하여 로그인 폼을 제공합니다.</li>
</ul>
<hr>
<p>이렇게 하면 <code>/test/employee</code> 뷰는 로그인된 사용자 중에서 역할이 <code>'2'</code>인 사용자만 접근할 수 있게 됩니다. 필요한 경우 역할 비교 부분을 수정하여 정확한 역할 이름이나 코드를 사용하세요.</p>

</article>


        
        <footer class="site-footer">
            
            <address>
                
            </address>
            <p>&copy; 2025 My Test Site. All rights reserved.</p>
        </footer>
    </main>

    
    <aside class="sidebar">
        <h3>최근 글</h3>
        <ul>
            
            <li><a href="http://localhost:1313/02.inbox/di-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-%EC%9D%98-%ED%83%80-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EC%A0%91%EA%B7%BC-%EC%9C%A0%ED%8A%9C%EB%B8%8C-%EB%8C%93%EA%B8%80/">di (의존성 주입) 의 타 프레임워크 접근 유튜브 댓글</a></li>
            
            <li><a href="http://localhost:1313/%EB%AC%B4%EC%A0%9C-12/">무제 12</a></li>
            
            <li><a href="http://localhost:1313/temp/tmux/">tmux</a></li>
            
            <li><a href="http://localhost:1313/02.inbox/doxyzen-%ED%82%A4%EC%9B%8C%EB%93%9C/">Doxyzen 키워드</a></li>
            
            <li><a href="http://localhost:1313/university-algorizm/">university algorizm</a></li>
            
        </ul>

        <h3>태그</h3>
        
        
    </aside>
</body>
</html>