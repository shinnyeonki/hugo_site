---
title: lab5 과제 추가 설명
aliases: 
tags:
  - system-programing
description: 
source: system programming(university)
sequence: 
finish: 
created: 2024-10-06T03:47:00+09:00
modified: 2024-10-06T03:47:00+09:00

---

```
파일의 이름을 바꾸는 프로그램을 작성하는데, 
- 파일의 이름을 같은 디렉토리 안에서 바꾸거나 
- 다른 디렉토리로 이동하여 바꾸는 기능이 모두 구현되어야 합니다. 
- 4-1 강의자료에서 학습한 시스템 호출들을 사용하여 작성하기 바랍니다.
```


## manual rename
`rename()` 함수는 파일의 이름을 변경하며, 필요시 디렉토리 간에 이동할 수 있습니다. 이 함수는 다음과 같은 특성을 가지고 있습니다:
- **하드 링크와의 영향**: 다른 하드 링크(예: `link(2)`를 사용하여 생성된 링크)에 대해서는 영향을 미치지 않습니다.
- **열린 파일 디스크립터**: `oldpath`에 대한 열린 파일 디스크립터는 영향을 받지 않습니다.

## 성공 여부 결정
`rename()` 작업이 성공하는지 여부는 여러 가지 제약 조건에 따라 결정됩니다. 아래는 관련된 오류 상황입니다:
- **newpath가 이미 존재하는 경우**: `rename()`은 원자적으로 대체되므로, 이 시점에서 다른 프로세스가 `newpath`를 접근하려고 할 때 파일이 없다고 발견되는 상황은 없습니다. 그러나 `oldpath`와 `newpath`가 모두 파일을 참조하는 상태가 발생할 수 있는 시간 여유가 있습니다.
- **oldpath와 newpath가 동일한 하드 링크인 경우**: 두 경로가 동일한 파일을 참조하고 있다면, `rename()`은 아무 작업도 하지 않고 성공 상태를 반환합니다.
- **newpath가 존재하지만 작업이 실패하는 경우**: 어떤 이유로든 작업이 실패하면, `rename()`은 `newpath`의 인스턴스를 그대로 유지합니다.
- **oldpath가 디렉토리를 참조하는 경우**: 이 경우, `newpath`는 존재하지 않거나 비어 있는 디렉토리를 지정해야 합니다.
- **oldpath가 심볼릭 링크를 참조하는 경우**: 링크가 이름이 변경됩니다. 만약 `newpath`가 심볼릭 링크를 참조한다면, 해당 링크는 덮어씌워집니다.