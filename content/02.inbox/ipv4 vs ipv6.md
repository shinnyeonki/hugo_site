---
title: ipv4 vs ipv6
resource-path: 02.inbox/ipv4 vs ipv6.md
keywords:
tags:
  - network
date: 2025-05-07T21:26:00+09:00
lastmod: 2025-05-07T21:26:00+09:00
---
### 📋 **IPv4 헤더 필드**

| 필드 이름                  | 크기   | 간단 설명                                      |
| -------------------------- | ------ | ---------------------------------------------- |
| **Version**                | 4비트  | IP 버전 (예: IPv4, IPv6) 지정                  |
| **Header Length (IHL)**    | 4비트  | 헤더 길이 (옵션 유무에 따라 달라짐)            |
| **Type of Service (TOS)**  | 8비트  | QoS 설정 (DSCP + ECN 포함)                     |
| **Total Length**           | 16비트 | 전체 패킷 크기 (헤더 + 데이터)                 |
| **Identification**         | 16비트 | 프래그먼트 식별을 위한 고유 번호               |
| **Flags**                  | 3비트  | 프래그먼트 가능 여부 표시 (예: DF, MF)         |
| **Fragment Offset**        | 13비트 | 조각난 패킷의 위치 정보                        |
| **Time To Live (TTL)**     | 8비트  | 패킷 수명 (라우터 통과 시 감소, 0이 되면 폐기) |
| **Protocol**               | 8비트  | 상위 계층 프로토콜 (TCP=6, UDP=17 등)          |
| **Header Checksum**        | 16비트 | 헤더 오류 검출용 체크섬                        |
| **Source IP Address**      | 32비트 | 보낸 사람 IP 주소                              |
| **Destination IP Address** | 32비트 | 받는 사람 IP 주소                              |
| **Options (선택적)**       | 가변   | 추가 기능 제공 (보통 사용 안 함)               |
| **Data (Payload)**         | 가변   | 실제 전송할 데이터 (TCP/UDP 세그먼트 등)       |




### 📋 **IPv6 헤더 필드**

| 필드 이름 | 크기 | 간단 설명 |
|----------|------|-------------|
| **Version** | 4비트 | IP 버전 번호 (IPv6이므로 값은 항상 `6`) |
| **Traffic Class** | 8비트 | 트래픽 우선순위 지정 (IPv4의 TOS/DSCP와 유사, QoS 지원) |
| **Flow Label** | 20비트 | 특정 패킷 흐름(예: 실시간 음성/영상) 식별용 라벨 (QoS 및 Flow 기반 처리 지원) |
| **Payload Length** | 16비트 | 헤더 이후 데이터(payload)의 길이 (바이트 단위) |
| **Next Header** | 8비트 | 다음 헤더의 타입을 지정 (TCP=6, UDP=17 등, IPv4의 Protocol 필드와 유사) |
| **Hop Limit** | 8비트 | 패킷이 지나갈 수 있는 최대 라우터 수 (IPv4의 TTL 필드와 동일한 역할) |
| **Source Address** | 128비트 | 보낸 호스트의 IPv6 주소 |
| **Destination Address** | 128비트 | 받는 호스트의 IPv6 주소 |
| **Data (Payload)** | 가변 | 실제 전송되는 데이터 (TCP/UDP 세그먼트 또는 다른 프로토콜 데이터) |




### 📊 **IPv4 vs IPv6 헤더 비교표 (기능별 분류)**

#### 1. ✅ **버전 및 기본 정보**

| 기능 그룹    | IPv4 필드             | 크기   | 설명                        | IPv6 필드        | 크기   | 설명                        |
| -------- | ------------------- | ---- | ------------------------- | -------------- | ---- | ------------------------- |
| IP 버전    | Version             | 4비트  | IP 버전 식별 (IPv4=4, IPv6=6) | Version        | 4비트  | IP 버전 식별 (IPv6=6)         |
| 헤더 길이    | Header Length (IHL) | 4비트  | 헤더 총 길이 (옵션 포함 여부에 따라 다름) | -              | -    | IPv6는 고정 헤더 길이 (40바이트)    |
| 전체 패킷 크기 | Total Length        | 16비트 | 헤더 + 데이터 전체 크기            | Payload Length | 16비트 | 헤더 이후 데이터(payload) 길이만 지정 |

---

#### 2. 🎯 **주소 지정 및 라우팅**

| 기능 그룹 | IPv4 필드 | 크기 | 설명 | IPv6 필드 | 크기 | 설명 |
|----------|------------|------|------|-------------|------|------|
| 출발지 주소 | Source IP Address | 32비트 | 송신자 IPv4 주소 | Source Address | 128비트 | 송신자 IPv6 주소 |
| 목적지 주소 | Destination IP Address | 32비트 | 수신자 IPv4 주소 | Destination Address | 128비트 | 수신자 IPv6 주소 |
| 다음 헤더 | - | - | - | Next Header | 8비트 | 다음 헤더 유형 지정 (TCP/UDP/확장헤더 등) |

---

#### 3. ⚙️ **QoS 및 트래픽 관리**

| 기능 그룹 | IPv4 필드 | 크기 | 설명 | IPv6 필드 | 크기 | 설명 |
|----------|------------|------|------|-------------|------|------|
| 트래픽 우선순위 | Type of Service (TOS) | 8비트 | DSCP(6비트) + ECN(2비트), QoS 설정 | Traffic Class | 8비트 | DSCP(6비트) + ECN(2비트), QoS 설정 |
| 흐름 식별 | - | - | - | Flow Label | 20비트 | 특정 흐름(flow) 식별용 라벨 (실시간 서비스 지원) |

---

#### 4. 🔄 **패킷 처리 및 포워딩**

| 기능 그룹 | IPv4 필드 | 크기 | 설명 | IPv6 필드 | 크기 | 설명 |
|----------|------------|------|------|-------------|------|------|
| 생존 시간 | Time To Live (TTL) | 8비트 | 패킷의 최대 홉 수 (라우터 통과 시 감소) | Hop Limit | 8비트 | 동일한 기능 (IPv4 TTL과 동일) |
| 체크섬 검사 | Header Checksum | 16비트 | 헤더 오류 검출용 (매 라우터마다 재계산) | - | - | IPv6에서는 헤더 체크섬 제거 (TCP/UDP에서 처리) |
| 프래그먼트 처리 | Identification<br>Flags<br>Fragment Offset | 16+3+13비트 | 패킷 분할 및 조립 정보 | - | - | IPv6에서는 프래그먼트 처리 소스/목적지에서만 가능 |

---

#### 5. 🔧 **확장성 및 추가 기능**

| 기능 그룹 | IPv4 필드 | 크기 | 설명 | IPv6 필드 | 크기 | 설명 |
|----------|------------|------|------|-------------|------|------|
| 확장 옵션 | Options | 가변 | 선택적 기능 제공 (보통 사용 안 함) | Extension Headers | 가변 | `Next Header`로 연결되는 확장 헤더 구조 |
| 데이터 영역 | Data (Payload) | 가변 | 실제 전송 데이터 (TCP/UDP 등) | Data (Payload) | 가변 | 실제 전송 데이터 (TCP/UDP 등) |

---

#### ✅ **요약 비교 요약표**

| 항목     | IPv4             | IPv6                                     | 특징                 |
| ------ | ---------------- | ---------------------------------------- | ------------------ |
| 주소 길이  | 32비트             | 128비트                                    | IPv6는 주소 고갈 문제 해결  |
| 헤더 길이  | 가변 (20~60바이트)    | 고정 (40바이트)                               | IPv6는 단순화된 헤더 구조   |
| QoS 지원 | TOS (DSCP + ECN) | Traffic Class (DSCP + ECN)<br>Flow Label | IPv6가 더 세밀한 QoS 지원 |
| 프래그먼트  | 중간 노드에서 가능       | 소스/목적지만 가능                               | IPv6는 라우터 부담 감소    |
| 체크섬    | 헤더 체크섬 있음        | 없음                                       | IPv6는 TCP/UDP에서 처리 |
| 확장 기능  | Options 필드       | Extension Headers                        | IPv6가 더 유연한 확장 구조  |
| 다음 헤더  | Protocol 필드      | Next Header                              | 유사한 역할 수행          |






### 데이터평면, 제어 평면
- **데이터 평면 (Data Plane)**  
  → 실제 데이터 패킷을 전달하는 역할 (패킷 포워딩)
- **제어 평면 (Control Plane)**  
  → 어떤 경로로 패킷을 보낼지 결정하는 역할 (라우팅)

| 항목       | 데이터 평면 (Data Plane)              | 제어 평면 (Control Plane)            |
| -------- | -------------------------------- | -------------------------------- |
| 목적       | 패킷 전달 (포워딩)                      | 경로 결정 (라우팅)                      |
| 수행 작업    | 패킷 수신 → 목적지 주소 확인 → 다음 홉 선택 → 전달 | 라우팅 프로토콜 실행, 경로 계산, 라우팅 테이블 업데이트 |
| 처리 속도    | 매우 빠름 (마이크로초 이하)                 | 상대적으로 느림                         |
| 사용 메커니즘  | 포워딩 테이블 (FIB), 캐시 등              | 라우팅 프로토콜 (RIP, OSPF, BGP 등)      |
| 주요 구성 요소 | 라우터의 포워딩 엔진                      | 라우터의 CPU, 라우팅 프로토콜 모듈            |
| 보안 영향    | 직접적인 패킷 유출/손실 영향                 | 라우팅 정보 변조, 네트워크 다운 위험            |



### **IP 헤더 필드별로 데이터 평면 / 제어 평면 사용 여부 정리**

| 필드 이름                      | 크기   | 간단 설명                         | 사용되는 평면                                                                                                 |
| -------------------------- | ---- | ----------------------------- | ------------------------------------------------------------------------------------------------------- |
| **Version**                | 4비트  | IP 버전 (예: IPv4, IPv6) 지정      | **데이터 평면**<br>(패킷 포워딩 시 해석 필요)                                                                          |
| **Header Length (IHL)**    | 4비트  | 헤더 길이 (옵션 유무에 따라 달라짐)         | **데이터 평면**<br>(헤더 파싱 및 데이터 위치 식별)                                                                       |
| **Type of Service (TOS)**  | 8비트  | QoS 설정 (DSCP + ECN 포함)        | **데이터 평면**<br>(QoS 기반 포워딩 정책 적용)                                                                        |
| **Total Length**           | 16비트 | 전체 패킷 크기 (헤더 + 데이터)           | **데이터 평면**<br>(패킷 처리 및 메모리 관리를 위해 사용)                                                                   |
| **Identification**         | 16비트 | 프래그먼트 식별을 위한 고유 번호            | **데이터 평면**<br>(프래그먼트 재조립 시 사용)                                                                          |
| **Flags**                  | 3비트  | 프래그먼트 가능 여부 표시 (예: DF, MF)    | **데이터 평면**<br>(패킷 분할 및 재조합 결정)                                                                          |
| **Fragment Offset**        | 13비트 | 조각난 패킷의 위치 정보                 | **데이터 평면**<br>(패킷 재조립 시 사용)                                                                             |
| **Time To Live (TTL)**     | 8비트  | 패킷 수명 (라우터 통과 시 감소, 0이 되면 폐기) | **데이터 평면**<br>(패킷 생존 시간 관리 및 폐기 결정)                                                                     |
| **Protocol**               | 8비트  | 상위 계층 프로토콜 (TCP=6, UDP=17 등)  | **데이터 평면**<br>(상위 계층으로 전달 시 필요)                                                                         |
| **Header Checksum**        | 16비트 | 헤더 오류 검출용 체크섬                 | **데이터 평면**<br>(패킷 손상 검사 후 전달 결정)                                                                        |
| **Source IP Address**      | 32비트 | 보낸 사람 IP 주소                   | **데이터 평면**, **제어 평면**<br>→ 포워딩에는 직접 사용되지 않지만, 로깅/필터링, 라우팅 프로토콜에서 활용                                     |
| **Destination IP Address** | 32비트 | 받는 사람 IP 주소                   | **제어 평면**, **데이터 평면**<br>→ 가장 핵심적인 필드<br>→ **제어 평면**: 경로 계산 (라우팅 테이블 매칭)<br>→ **데이터 평면**: 다음 홉 선택 및 포워딩 |
| **Options (선택적)**          | 가변   | 추가 기능 제공 (보통 사용 안 함)          | **데이터 평면**<br>(특수한 경우에만 처리됨)                                                                            |
| **Data (Payload)**         | 가변   | 실제 전송할 데이터 (TCP/UDP 세그먼트 등)   | **데이터 평면**<br>(포워딩 대상인 실제 데이터)                                                                          |


