---
title: x86-64 레지스터 최소 설명
resource-path: 02.inbox/x86-64 레지스터 최소 설명.md
keywords: []
tags:
  - register
date: 2024-12-20T09:02:00+09:00
lastmod: 2024-12-20T09:02:00+09:00
---
x86-64 아키텍처에서 각 레지스터는 특정 목적이나 일반적인 연산에 사용됩니다. 이들은 64비트 레지스터이며, 일부는 하위 32비트, 16비트, 8비트 단위로도 사용할 수 있습니다. 여기서는 주요 레지스터와 그 역할을 설명하겠습니다.

---

## **범용 레지스터 (General-Purpose Registers)**

| 레지스터       | 역할/사용 목적                                                                          |
| ---------- | --------------------------------------------------------------------------------- |
| **RAX**    | - 주로 산술 연산(곱셈, 나눗셈)의 결과 저장<br>- 함수 호출 시 반환값 저장                                    |
| **RBX**    | - 일반 데이터 저장 (callee-saved: 함수 호출 후 유지됨)                                           |
| **RCX**    | - 반복 연산의 카운터로 사용 (`loop` 명령어에서 사용)<br>- 함수 호출 시 세 번째 인수 전달 (Windows x64 ABI 기준)   |
| **RDX**    | - 입출력 연산 및 곱셈/나눗셈에서 사용- 함수 호출 시 두 번째 인수 전달                                        |
| **RSI**    | - 문자열 조작에서 소스 주소 (Source Index)<br>- 함수 호출 시 첫 번째 인수 전달 (Linux x86-64 ABI 기준)     |
| **RDI**    | - 문자열 조작에서 대상 주소 (Destination Index)<br>- 함수 호출 시 첫 번째 인수 전달 (Windows x64 ABI 기준) |
| **RBP**    | - 베이스 포인터 (Base Pointer)<br>- 함수 호출 시 스택 프레임을 추적                                  |
| **RSP**    | - 스택 포인터 (Stack Pointer)<br>- 현재 스택의 최상단을 가리킴                                     |
| **R8~R15** | - 추가 범용 레지스터<br>- 함수 호출 시 추가 인수 전달 (Linux 및 Windows x64 ABI)                      |

---
## **특수 목적 레지스터**

| 레지스터       | 역할/사용 목적                                             |
| ---------- | ---------------------------------------------------- |
| **RIP**    | - 명령 포인터 (Instruction Pointer)<br>- 현재 실행 중인 명령어의 주소 |
| **RFLAGS** | - 플래그 레지스터<br>- 연산 결과의 상태(예: 캐리, 오버플로, 제로 등) 저장      |
| **RSP**    | - 스택 포인터<br>- 함수 호출 및 지역 변수 할당 관리                    |
| **RBP**    | - 베이스 포인터<br>- 스택 프레임의 기준점 역할                        |

---
## **세그먼트 레지스터**

| 레지스터           | 역할/사용 목적                        |
| -------------- | ------------------------------- |
| **CS**         | 코드 세그먼트 (Code Segment)          |
| **DS**         | 데이터 세그먼트 (Data Segment)         |
| **SS**         | 스택 세그먼트 (Stack Segment)         |
| **ES, FS, GS** | 추가 세그먼트<br>- 주로 OS 및 특정 상황에서 사용 |

---
## **레지스터 크기**

x86-64에서 각 레지스터는 이름에 따라 하위 크기를 참조할 수 있습니다.

|레지스터 이름|크기 (비트)|설명|
|---|---|---|
|**RAX**|64비트|전체 레지스터|
|**EAX**|32비트|하위 32비트|
|**AX**|16비트|하위 16비트|
|**AH/AL**|8비트|상위 8비트(AH) / 하위 8비트(AL)|

예를 들어, `RAX`의 하위 16비트에 접근하려면 `AX`를 사용하며, 하위 8비트는 `AL`을, 상위 8비트는 `AH`를 통해 접근할 수 있습니다.

---

## **함수 호출 규약 (Calling Convention)**

### **1. Windows x64 ABI**

- 첫 번째~네 번째 인수: **RCX**, **RDX**, **R8**, **R9** 레지스터에 전달
- 반환값: **RAX** 레지스터
- 나머지 인수: 스택에 저장

### **2. Linux x64 ABI (System V)**

- 첫 번째~여섯 번째 인수: **RDI**, **RSI**, **RDX**, **RCX**, **R8**, **R9** 레지스터에 전달
- 반환값: **RAX** 레지스터
- 나머지 인수: 스택에 저장

---

## **실제 사용 예시**

1. **산술 연산**
    
    ```assembly
    mov rax, 5       ; RAX에 5 저장
    add rax, 3       ; RAX에 3 더하기
    ```
    
2. **함수 호출**
    
    ```assembly
    mov rdi, 10      ; 첫 번째 인수에 10 전달 (Linux x64 기준)
    call my_function ; 함수 호출
    ```
    
3. **스택 사용**
    
    ```assembly
    push rax         ; RAX 값을 스택에 저장
    pop rbx          ; 스택에서 값을 가져와 RBX에 저장
    ```
    

레지스터와 스택의 관계 또는 함수 호출 규약에 대해 더 알고 싶다면 말씀해주세요!