---
title: 드라이버는 커널인가
resource-path: 02.inbox/드라이버는 커널인가.md
aliases:
tags:
  - 잡지식
  - operating-system
date: 2025-08-11T02:58:32+09:00
lastmod: 2025-08-11T03:00:33+09:00
---
"**모든 드라이버는 커널의 일부로 간주되는가?**"  

> ✅ **하드웨어 제어를 직접 하는 전통적인 장치 드라이버는 '커널의 일부'로 간주됩니다.**  
> ❌ 하지만 **모든 드라이버가 커널 코드 트리에 포함되거나, 커널 공간에서만 동작하는 것은 아닙니다.**

### 1. 전통적인 장치 드라이버 → 커널의 일부 (예: 네트워크 카드, USB, 디스크, TTY 드라이버 등)

이들은 다음 조건을 충족하므로 **커널의 일부**로 간주됩니다:

- **커널 공간**(kernel space)에서 실행됨
- 하드웨어 레지스터, 인터럽트, DMA 등에 접근
- 시스템 콜이나 VFS(가상 파일 시스템)와 통합됨
- 커널의 메모리 관리, 스케줄러와 상호작용

### 예시:

```c
// 커널 소스 트리에서 볼 수 있는 드라이버 코드 예
drivers/usb/core/hub.c
drivers/tty/pty.c
drivers/net/ethernet/intel/e1000/e1000_main.c
```

→ 이 코드들은 리눅스 커널 소스 트리(`https://git.kernel.org`)에 포함되어 있고,  
컴파일 시 **커널의 일부**가 되거나, **로드 가능한 모듈**로 분리됩니다.

### 2. 로드 가능한 모듈도 "커널의 일부"인가? => **네, 삽입된 순간부터는 '커널의 일부'입니다.**
예를 들어:

```bash
$ sudo modprobe usbserial
```

→ 이 모듈은 `.ko` 파일로 디스크에 있지만, 로드되면 **커널 메모리에 적재되어 커널과 같은 권한으로 실행**됩니다.
### 3. 사용자 공간에서 동작하는 드라이버는?
이 경우는 **정의상 논란이 있지만**, 일반적으로는 **"드라이버"라고는 해도 커널의 일부는 아님**.

#### 예 1: **FUSE**(Filesystem in Userspace)
- 파일 시스템 드라이버처럼 동작하지만, 사용자 공간에서 실행
- 커널의 `fuse.ko` 모듈이 중간에서 시스템 콜과 연결

```bash
$ sshfs user@remote:/ ~/remote_folder
```

→ 이건 사용자 공간에서 동작하는 **FUSE 기반 드라이버**

➡️ 하지만 **진짜 하드웨어 제어는 커널이 함**. FUSE는 "인터페이스 제공 + 중계" 역할.

#### 예 2: **UIO / VFIO**

- 특정 PCI 장치를 사용자 공간에서 제어 (예: DPDK, SR-IOV)
- 커널이 메모리 매핑만 해주고, 나머지는 앱이 처리

➡️ 이 경우도 **커널의 도움 없이는 불가능**. 완전히 독립된 건 아님.

### 4. 그럼 "드라이버"라는 말의 의미는?

여기서 혼동이 생길 수 있어요. "드라이버"라는 단어는 **맥락에 따라 다르게 쓰입니다**:

| 맥락 | 의미 | 커널의 일부? |
|------|------|----------------|
| 전통적 의미 (리눅스 커널 개발자 관점) | 커널 공간에서 하드웨어 제어 | ✅ 예 |
| 일반 사용자 관점 | "장치를 쓰게 해주는 소프트웨어" | ❌ 아닐 수 있음 |
| 임베디드/고성능 컴퓨팅 | 사용자 공간에서 동작하는 고속 드라이버 | ⚠️ 부분적으로만 |

### 5. TTY/PTY 드라이버는?

- **커널 내부 코드** (`drivers/tty/*`)
- `pty.c`, `n_tty.c`(line discipline) 등은 모두 커널 소스에 있음
- `/dev/tty`, `/dev/pts/*` 장치 파일은 커널이 관리

 확실히 **커널의 일부**입니다.

### 결론: "모든 드라이버는 커널의 일부인가?"

| 질문 | 답변 |
|------|------|
| **모든 드라이버가 커널 소스 트리에 포함되는가?** | ❌ 아니요. FUSE, 외부 모듈 등은 별도 |
| **모든 드라이버가 커널 공간에서 실행되는가?** | ❌ 아니요. FUSE, UIO 등은 userspace |
| **전통적인 장치 드라이버는 커널의 일부인가?** | ✅ **예** — 정의상 커널 공간에서 동작해야 함 |
| **커널의 일부로 간주되는 기준은?** | ✔️ 커널과 같은 공간에서 실행되고, 커널 API 사용, 시스템 리소스 제어 |
	


