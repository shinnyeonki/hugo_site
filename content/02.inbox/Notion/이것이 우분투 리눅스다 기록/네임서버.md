---
title: 네임서버
resource-path: 02.inbox/Notion/이것이 우분투 리눅스다 기록/네임서버.md
---
네임서버 = DNS

도메인 이름을 ip 주소로 전환시켜주는 역할

  

접속 과정

클라이언트 입장

1. ip 주소로 접속
2. host 파일을 이용하여 접속
    1. `C:\Windows\system32\dirvers\etc\hosts` 파일
    2. `/etc/hosts`
3. 네임서버를 사용하여 접속
    1. `/etc/resolv.conf` 파일의 nameserver IP 주소로 질의하게 된다
    2. Client 는 local DNS 서버에게만 물어보면 마법처럼 도메인 이름의 ip주소를 알려준다

  

local DNS 서버 입장 (Local DNS Server) ISP 또는 public DNS(google 8.8.8.8 , 8.8.4.4)

1. 클라이언트의 쿼리가 캐쉬에 저장되어 있다면 바로 Client 에게 보내준다 하지만 없다면
2. root DNS 서버에서 아래로 내려가며 찾을때 까지 물어본다

  

우분투의 경우 systemd-resolved 를 통해 데몬으로 관리되어 실제 dns 서버는 resolvectl status 명령어로 확인해야 한다 일반적으로 127.0.0.53 이 우분투의 dns 서버일 것이다

  

## **hosts.conf 파일**

- `/etc/hosts.conf` : 어떤 특정 도메인에 대해 IP 주소 값을 찾을 때, 주소 값을 어디에서 찾을 것인가를 결정하는 파일
- `/etc/hosts.conf` 파일
    
    ```
      [root@server ~]# cat /etc/hosts.conf
      multi on
      order hosts,bind
    ```
    
    - `hosts` : `/etc/hosts` 파일
    - `bind` : DNS를 말함. 즉, `/etc/resolv.conf`에 정의된 네임 서버를 의미

어떤 PC로 부터 자신(DNS 서버)에게 도메인 주소를 IP로 알려달라는 질의 요청이 온 경우

1. 맨 처음엔 `/etc/hosts`파일에서 찾아본다.
2. `/etc/hosts`파일에 없으면, `/etc/resolv.conf`파일에 정의된 네임 서버에게 쿼리를 날린다.
    
    즉, 도메인 네임 서비스를 어디서 받을 것인가를 정의해 놓은 파일이라는 것이다.
    

  

## **resolv.conf 파일**

- `resolv.conf` : 사용하고자 하는 네임 서버를 지정하는 파일
- `/etc/resolv.conf` 파일
    
    ```
      [root@server ~]# cat /etc/resolv.conf
      # Generated by NetworkManager
      domain localdomain
      search abc.com
      nameserver 192.168.111.2
    ```
    
    - `search` : 호스트 + 도메인으로 사용할 도메인 명을 지정해둔 것이다. 거의 모두 호스트명과 도메인명을 함께 사용한다.
        - 하지만 특별하게 호스트명만 사용됐을 때 사용하게 될 기본 도메인명을 의미함
        - 예를 들어, `search abc.com`이라고 하면 `"telnet www"`라고 했을 경우 자동으로 `"telnet www.abc.com"`으로 인식한다.
            - `www` : 호스트명
            - `abc.com` : 도메인명
    - `nameserver` : 말 그대로 이 서버에서 사용할 네임 서버를 지정해둔 것이다.