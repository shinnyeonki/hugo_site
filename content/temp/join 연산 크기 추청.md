---
title: join 연산 크기 추청
resource-path: temp/join 연산 크기 추청.md
aliases:
tags:
  - database
date: 2024-12-04T14:29:00+09:00
lastmod: 2024-12-04T14:29:00+09:00
---
이 문제는 관계형 데이터베이스에서 **조인 연산의 크기 추정**에 대한 설명입니다. 주어진 내용을 기반으로 예제를 들어 설명하겠습니다.

## 문제 설명:

- **$R \bowtie S$**: 릴레이션 $R$과 $S$를 조인합니다.
- **$A$**는 두 릴레이션 $R$과 $S$ 사이의 조인 속성입니다.
- $n_R$: 릴레이션 $R$의 튜플 수
- $n_S$: 릴레이션 $S$의 튜플 수
- $V(A, S)$: 속성 $A$의 $S$에서의 고유 값 수 (카디널리티)
- $V(A, R)$: 속성 $A$의 $R$에서의 고유 값 수

조인 결과의 크기는 아래와 같이 두 가지 방식으로 추정됩니다:

1. $n_R \times \frac{n_S}{V(A, S)}$
2. $n_S \times \frac{n_R}{V(A, R)}$

이 두 값 중 더 작은 값을 선택하는 것이 더 정확한 추정을 # join 연산 크기 추청
제공한다고 설명합니다.

---

## 예제:

### 데이터:

1. 릴레이션 $R$:
    
    | A | B |
    |---|---|
    | 1 | X |
    | 2 | Y |
    | 3 | Z |
    
    $n_R = 3$, $V(A, R) = 3$ (속성 $A$의 값 1, 2, 3은 모두 고유함)
    
2. 릴레이션 $S$:
    
    | A | C |
    |---|---|
    | 1 | P |
    | 1 | Q |
    | 2 | R |
    | 2 | S |
    | 3 | T |
    
    $n_S = 5$, $V(A, S) = 3$ (속성 $A$의 값 1, 2, 3은 모두 고유함)
    

### 조인 크기 추정:

조인 $R \bowtie S$는 $A$ 속성을 기준으로 이루어집니다.

1. 첫 번째 추정:
    
    $n_R \times \frac{n_S}{V(A, S)} = 3 \times \frac{5}{3} = 5$
    
2. 두 번째 추정:
    
    $n_S \times \frac{n_R}{V(A, R)} = 5 \times \frac{3}{3} = 5$

### 결론:

이 경우 두 추정 값이 동일하므로 조인 결과 크기를 5로 예측합니다. 조인을 실행해 보면 실제로 조인된 튜플 수가 5임을 확인할 수 있습니다.

### 추가 개선:

- 만약 속성 $A$의 **히스토그램**(각 값이 얼마나 자주 등장하는지에 대한 분포 정보)이 있다면, 각 값별로 보다 정확한 추정을 할 수 있습니다. 예를 들어, 값 "1"이 $R$에서 1번, $S$에서 2번 등장한다면 해당 값의 조인 크기는 $1 \times 2 = 2$로 세부적으로 계산 가능합니다. 
