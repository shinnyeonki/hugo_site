---
title: 원격지 서버 시간 확인하기
date: 2025-10-24T20:53:44+09:00
lastmod: 2025-10-24T20:53:44+09:00
resource-path: temp/원격지 서버 시간 확인하기.md
draft: true
---
NTP 와 같은 프로토콜을  통해 시간을 동기화 할 수 있지만 원격지 서버의 허용을 대부분 안해주기 때문에 웹서버의 요청시 http 응답의 Date 항목을 통해 원격지 서버의 시간을 예측해 본다


현재 서버의 시간을 확인하는 예시
```c
  
int main() {
    struct timespec ts;
    while (1) {
        // 현재 시간을 가져옵니다.
        clock_gettime(CLOCK_REALTIME, &ts);
        // 시간 출력
        printf("\r%04ld-%02ld-%02ld %02ld:%02ld:%02ld.%09ld",
               ts.tv_sec / 31557600 + 1970, // 연도 계산
               (ts.tv_sec % 31557600) / 2629743 + 1, // 월 계산
               (ts.tv_sec % 2629743) / 86400 + 1, // 일 계산
               (ts.tv_sec % 86400) / 3600, // 시 계산
               (ts.tv_sec % 3600) / 60, // 분 계산
               ts.tv_sec % 60, // 초 계산
               ts.tv_nsec); // 나노초
        fflush(stdout); // 출력 버퍼를 플러시하여 즉시 출력
        usleep(1000); // 10,000 마이크로초 (1 밀리초) 대기
    }
    return 0;
}
```

위와 같은 인터페이스로 구현하고자 한다

| 프로그램 시작부터 요청 전까지 | 원격지 서버 요청부터 도착시점 | 원격지 서버 처리 시간 | 원격지 서버 부터 client 까지 | Date 항목 처리 | 출력  |
| ---------------- | ---------------- | ------------ | ------------------- | ---------- | --- |
|                  |                  |              | 1                   | 1          | 1   |



1. 프로그램 시작
2. 원격지 서버 요청 도착
3. 원격지 서버 처리 시간
4. 원격지 서버 출발 부터 client 까지
5. 시간 추출 및 처리
6. 출력


원격지 서버 처리시간은 정확히 그시간을 확인할 길이 없음
4 원격지 서버 출발 부터 client 까지 delay 의 경우 실시간으로 변경됨
5 시간 추출 및 처리의 경우 일반적으로 비슷한 시간이 걸림
6 출력 시간의 경우 비슷한 시간이 걸림




네트워크 지연시간
```
 curl -s -o /dev/null -w %{time_total}\\n class.mju.ac.kr
```




서버 데이터 갱신시간의 규칙 예측하기