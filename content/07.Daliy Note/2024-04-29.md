---
title: 2024 04 29
date: 2025-10-24T20:53:42+09:00
lastmod: 2025-10-24T20:53:42+09:00
resource-path: 07.Daliy Note/2024-04-29.md
draft: true
---
```shell
docker run -d -p 1521:1521 --name odb -e ORACLE_PASSWORD=1253 -v oracle-volume:/opt/oracle/oradata gvenzl/oracle-xe
```

```shell
docker exec odb resetPassword 1253
```

docker run -d -p 1523:1521 --name hodb -e ORACLE_PASSWORD=1111 -v oracle-volume-hyh:/opt/oracle/oradata gvenzl/oracle-xe

- CDB : Container Database
- PDB : Pluggable Database
- CDB에서 Seed(PDB$SEED)는 데이터베이스는 아니지만 PDB 서버를 만들기 위한 템플릿입니다.
- PDB 서버를 만들때 Seed에 있는 설정을 기반으로 생성됩니다.

cdb > pdb > tablespace

```sql
alter session set "_ORACLE_SCRIPT"=true;
```

현재 컨테이너 cdb or pdb
```sql
SHOW con_name;
```

현제 cdb, pdb 기준 모든 pdb 조회
```sql
SHOW pdbs
```

```sql
select name from v$pdbs;
```

현재 cdb 인지 pdb 인지 확인
```sql
SELECT SYS_CONTEXT('USERENV', 'CON_NAME') AS CURRENT_CONTAINER FROM DUAL;
```

pdb로 변경
```sql
ALTER SESSION SET CONTAINER=PDB$SEED;
```

```sql
ALTER SESSION SET CONTAINER=XEPDB1; 
```

```sql
create pluggable database "XEPDB1" admin user "shinnk" identified by "1253";
```
cdb로 변경
```sql
ALTER SESSION SET CONTAINER=CDB$ROOT;
```

tablespace 조회
```sql
SELECT * FROM v$tablespace;
```

tablespace 삭제
```sql
drop tablespace snk_tablespace including contents and datafiles;
```

유저 확인
```sql
SELECT username FROM dba_users WHERE common = 'NO' AND account_status = 'OPEN';
```

create user hyh identified by 1111;
grant create session to hyh;
grant connect, resource to hyh;
alter user hyh default tablespace users quota unlimited on users;

```sql
create user snk identified by 1253 DEFAULT TABLESPACE snk_tablespace CONTAINER=CURRENT;
grant create session to snk CONTAINER=CURRENT;
grant connect, resource to snk CONTAINER=CURRENT;
alter user snk default tablespace snk_tablespace quota unlimited on snk_tablespace;
```
alter user snk default tablespace users quota unlimited on users;
```sql
CREATE TABLESPACE 테이블스페이스명
        DATAFILE '/경로/테이블스페이스파일명.dbf'
        SIZE 초기용량(100m,1g 등)
        AUTOEXTEND ON NEXT 자동증가용량(10M 등)
        MAXSIZE UNLIMITED;
```

```sql
CREATE TABLESPACE snk_tablespace DATAFILE '/opt/oracle/oradata/XE/XEPDB1/snk_tablespace.dbf' SIZE 1g AUTOEXTEND ON NEXT 100m MAXSIZE UNLIMITED;
```

```sql
SELECT d.TABLESPACE_NAME, d.FILE_NAME, d.BYTES, d.AUTOEXTENSIBLE, d.INCREMENT_BY, t.BLOCK_SIZE
FROM DBA_DATA_FILES d
JOIN DBA_TABLESPACES t ON d.TABLESPACE_NAME = t.TABLESPACE_NAME
WHERE d.TABLESPACE_NAME = 'SNK_TABLESPACE';
```


