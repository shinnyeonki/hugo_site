해당 문서는 코드 내용 없이 사용자 요구사항 즉 검색 규칙과 결과 표시 규칙에 대한 설명을 제공합니다.

## 1. 핵심 검색 규칙

시스템은 **통합 검색 (Integrated Search)**과 **범위 지정 검색 (Scoped Search)**의 두 가지 모드로 동작하며, 각 모드는 명확한 우선순위 규칙을 따릅니다.

### 1.1. 통합 검색 (Integrated Search)

`file:`과 같은 특별한 접두사 없이 입력된 일반 쿼리에 사용됩니다. 결과는 다음의 정교한 우선순위에 따라 정렬됩니다.

1.  **정확한 일치 (Exact Match)**: 검색어가 완전한 단어로 일치하는 경우.
    -   1순위: **파일명** (Filename)
    -   2순위: **태그** (Tag)
    -   3순위: **메타데이터** (Metadata)
    -   4순위: **컨텐츠** (Content)
2.  **부분 일치 (Substring Match)**: 검색어가 단어의 일부로 포함된 경우.
    -   5순위: **파일명** (Filename)
    -   6순위: **태그** (Tag)
    -   7순위: **메타데이터** (Metadata)
    -   8순위: **컨텐츠** (Content)

*예: `react`로 검색 시, 파일명이 `react`인 문서가 파일명에 `react`가 포함된 문서보다 상위에 노출됩니다.*
*예: `react`로 검색 시, 컨텐츠에 `react` 라는 정확한 단어가 존재하는 문서가 컨텐츠에 `react`가 substring으로 포함된 문서보다 상위에 노출됩니다.*
*예: `react`로 검색 시, tag명이 `react`인 문서가 컨텐츠에 `react`가 포함된 문서보다 상위에 노출됩니다.*

### 1.2. 범위 지정 검색 (Scoped Search)

쿼리 앞에 특정 접두사를 붙여 검색 범위를 한정합니다.

-   **지원 접두사**:
    -   `filename:`, `file:`, `f:` - 파일명
    -   `tag:`, `t:` - 태그
    -   `frontmatter`, `fm`, `metadata`, `meta:`, `m:` - 메타데이터 (키 또는 값) (예 : meta:author:shinnk, meta:shinnk, meta:author) 키, 값, 키-값 모두 지원
    -   `content:`, `c:` - 컨텐츠
-   **메타데이터 키-값 검색**: `meta:author:shinnk`와 같이 특정 키에 대한 값을 검색할 수 있습니다. 추가적으로 `meta:shinnk` 으로 검색도 지원 
-   **조합 규칙**:
    -   **단일 범위 쿼리** (예: `tag:spring`): `통합 검색`과 유사하게 **정확한 일치** 결과가 **부분 일치** 결과보다 우선적으로 표시됩니다.
    -   **복합 범위 쿼리** (예: `t:java f:concept`): 여러 조건을 **AND**로 조합하여 모두 만족하는 결과만 필터링합니다. 유연한 검색을 위해 모든 조건은 **부분 일치**로 처리됩니다.

---
## 2. 검색 결과 표시 규칙 (Search Result Display Rules) UI

검색 결과는 다음의 규칙에 따라 표시됩니다.

### 2.1. 통합 검색 결과 표시 규칙 (Integrated Search Result Display Rules)

1. **기본 표시 요소**: 파일명, 컨텐츠 요소가 표시됩니다.
2. **표시 요소 순서**: 파일명 → 태그 → 메타데이터 → 컨텐츠 요약문 순으로 표시됩니다.
3. **표시 요소 조건부 처리**:
    - 파일명: 항상 표시
    - 태그: 검색어가 태그에 매치(정확한 매칭, substring 포함)된 경우에만 표시
    - 메타데이터: 검색어가 메타데이터에 매치(정확한 매칭, substring 포함)된 경우에만 표시
    - 컨텐츠 요약문: 항상 표시되며 만약 검색어가 컨텐츠에 매치된 경우에는 해당 부분을 포함한 앞뒤 문장 일부를 잘라서 표시합니다.
4.  **우선순위 기반 표시**: 검색 결과는 **정확한 일치**가 **부분 일치**보다 우선적으로 표시됩니다.
5.  **하이라이트 처리**: 2가지로 구분됩니다. 검색창 내부의 하이라이팅과 이후 이동할 본문 하이라이팅이 있습니다. 
    - 검색창 내부의 하이라이팅: 검색어가 파일명, 태그, 메타데이터, 컨텐츠명에 매치된 경우 해당 부분을 강조 표시합니다. 컨텐츠명의 경우 위에 설명된 컨텐츠 요약문에 대해서만 하이라이팅이 적용됩니다.
    - 본문 하이라이팅: 검색어가 컨텐츠에 매치된 경우 웹 표준인 text fragment 방식을 사용하여 url 구성으로 컨텐츠 내에서 검색어가 강조 표시되도록 합니다.
6.  최상위에는 이것이 통합 검색 결과임을 나타내는 배너가 표시됩니다.

### 2.2. 범위 지정 검색 결과 표시 규칙 ( Scoped Search Result Display Rules )
1. **기본 표시 요소**: 파일명, 컨텐츠 요소가 표시됩니다.
2. **표시 요소 순서**: 파일명 → 태그 → 메타데이터 → 컨텐츠 요약문 순으로 표시됩니다.
3. **표시 요소 조건부 처리**:
    - 파일명: 항상 표시
    - 태그: 태그 범위 지정 검색 시에만 표시
    - 메타데이터: 메타데이터 범위 지정 검색 시에만 표시
    - 컨텐츠 요약문: 컨텐츠 범위 지정 검색 시에만 표시되며, 검색어가 컨텐츠에 매치된 경우에는 해당 부분을 포함한 앞뒤 문장 일부를 잘라서 표시합니다.
4.  **우선순위 기반 표시**: 검색 결과는 **정확한 일치**가 **부분 일치**보다 우선적으로 표시됩니다.
5.  **조건 일치 표시**: 각 결과 항목 우측에 우측정렬하여 어떤 범위 지정 조건이 일치했는지 표시합니다.
6.  **복합 조건 처리**: 여러 범위 지정 검색 조건이 동시에 만족해야 결과에 포함됩니다.
7.  **하이라이트 처리**: 2가지로 구분됩니다. 검색창 내부의 하이라이팅과 본문 하이라이팅이 있습니다. 
    - 검색창 내부의 하이라이팅: 검색어가 파일명, 태그, 메타데이터, 컨텐츠명에 매치된 경우 해당 부분을 강조 표시합니다. 컨텐츠명의 경우 위에 설명된 컨텐츠 요약문에 대해서만 하이라이팅이 적용됩니다.
    - 본문 하이라이팅: 검색어가 컨텐츠에 매치된 경우 웹 표준인 text fragment 방식을 사용하여 url 구성으로 컨텐츠 내에서 검색어가 강조 표시되도록 합니다.
8.  최상위에는 이것이 범위 지정 검색 결과임을 나타내는 배너가 표시됩니다.


## 검색창 내부 보이는 것

정확한 매치 🎯
부분 매치 ≈

통합검색 🔍
범위 지정 검색  🔭

통합검색에서 ui 에서 좌측에 보여야 하는것 (하이라이팅은 검색된 것만 부분일치면 부분만 하이라이팅)
파일명 : {파일명} (무조건 보이기) (정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)
태그 : {태그} (정확한 일치나 부분 일치일때만) (정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)
메타데이터 : {메타데이터} (정확한 일치나 부분 일치일때만) (정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)
본문 : {본문} (일치가 없을 때는 앞부분 부터, 일치가 될때는 일치 앞뒤) (정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)



범위 지정 검색 ui 에서 좌측에 보여야 하는것
파일명 : {파일명} (무조건 보이기)(정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)
태그 : {태그} (정확한 일치나 부분 일치일때만)(정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)
메타데이터 : {메타데이터} (정확한 일치나 부분 일치일때만)(정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)
본문 : {본문} (일치가 될때만 일치 앞뒤) (정확히 일치한 경우 🎯, 부분 일치한 경우 ≈)




파일명 태그 메타데이터 본문의 경우 따로 아이콘 없이 한글로 적어

