{{/* layouts/partials/left-nav/tree-view.html */}}
<style>
    /* Chevron 회전 애니메이션 */
    #ln-file-tree .ln-chevron {
        transition: transform 0.2s ease-in-out;
        transform: rotate(90deg);
    }
    #ln-file-tree details[open] > summary .ln-chevron {
        transform: rotate(270deg);
    }
</style>

{{ $currentSection := .currentSection }}
{{ $currentPage := .currentPage }}

{{ range $currentSection.Sections.ByTitle }}
    {{ if .IsSection }}
        <li>
            <details class="group" {{ if .IsAncestor $currentPage }}open{{ end }}>
                <summary class="{{ if eq $currentPage.Permalink .Permalink }}text-primary-blue-light font-bold border-primary-blue-light{{ else }}hover:bg-neutral-50 dark:hover:bg-neutral-800/50{{ end }}">
                    <span class="ln-folder-icon {{ if eq $currentPage.Permalink .Permalink }}text-primary-blue-light{{ else }}text-neutral-400 dark:text-neutral-500{{ end }}">
                        <span class="ln-icon w-5 h-5 block"></span>
                    </span>
                    <a href="{{ .Permalink }}" onclick="event.stopPropagation();">
                        {{ .Title }}
                    </a>
                    <span class="{{ if eq $currentPage.Permalink .Permalink }}text-primary-blue-light{{ else }}text-neutral-400 dark:text-neutral-500{{ end }}">
                        <span class="ln-chevron w-4 h-4 block"></span>
                    </span>
                </summary>
                <ul>
                    {{ partial "left-nav/tree-view.html" (dict "currentSection" . "currentPage" $currentPage) }}
                </ul>
            </details>
        </li>
    {{ end }}
{{ end }}

{{ range $currentSection.RegularPages.ByTitle }}
    <li>
        <a href="{{ .Permalink }}" class="{{ if eq $currentPage.Permalink .Permalink }}text-primary-blue-light font-bold border-primary-blue-light{{ else }}text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800/50{{ end }}">
            <span class="{{ if eq $currentPage.Permalink .Permalink }}text-primary-blue-light{{ else }}text-neutral-400 dark:text-neutral-500{{ end }}">
                <span class="ln-icon w-5 h-5 block"></span>
            </span>
            <span>{{ .Title }}</span>
        </a>
    </li>
{{ end }}