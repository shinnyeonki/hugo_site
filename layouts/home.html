{{ define "main" }}
<h1>í™ˆí˜ì´ì§€ **home.html** {{ .Kind }}</h1>
<h3>=== ë¶„ë¥˜ ===</h3>
<ul>
    <li><a href="/tags/">ëª¨ë“  íƒœê·¸</a></li>
    <li><a href="/categories/">ëª¨ë“  ì¹´í…Œê³ ë¦¬</a></li>
    <li><a href="/archives/">ëª¨ë“  ì•„ì¹´ì´ë¸Œ</a></li>
    <li><a href="/about/">ì‚¬ì´íŠ¸ ì†Œê°œ</a></li>
    <li><a href="/contact/">ì—°ë½ì²˜</a></li>
    <li><a href="/sitemap.xml">ì‚¬ì´íŠ¸ë§µ</a></li>
    <li><a href="/search/">ê²€ìƒ‰</a></li>
    <li><a href="/privacy/">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a></li>
    <li><a href="/terms/">ì´ìš©ì•½ê´€</a></li>
</ul>
<h3>=== ê¸°íƒ€ ===</h3>
{{/* {{ .Site.Menus.main }}: 'main' ë©”ë‰´ */}}
<br>
{{/* {{ .Site.Taxonomies.tags }}: ëª¨ë“  'íƒœê·¸' ëª©ë¡ */}}
<br>
{{/* {{ .Site.Taxonomies.categories }}: ëª¨ë“  'ì¹´í…Œê³ ë¦¬' ëª©ë¡ */}}
<br>
{{ .Site.Data }}: ë°ì´í„° íŒŒì¼
<br>
<hr>

<hr>
<h3> === ëª¨ë“  ì„¹ì…˜ === </h3>
<ul>
    <!-- .Site.SectionsëŠ” ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ì„¹ì…˜ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. -->
    {{ range .Site.Sections }}
    <li>
        <!-- ê° ì„¹ì…˜ì€ í•˜ë‚˜ì˜ í˜ì´ì§€ ê°ì²´ì´ë¯€ë¡œ .Title, .Permalink ë“±ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤. -->
        <a href="{{ .Permalink }}">{{ .Title }}</a>

        <!-- (ì„ íƒì‚¬í•­) í•´ë‹¹ ì„¹ì…˜ì— í¬í•¨ëœ ì¼ë°˜ í˜ì´ì§€ì˜ ê°œìˆ˜ë¥¼ í‘œì‹œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. -->
        <span>({{ len .Pages }})</span>
    </li>
    {{ end }}
</ul>


{{/* ìµœì‹ ìˆœ 10ê°œ ê¸€ ì„¹ì…˜ */}}
<h3>=== ìµœì‹  ê¸€ ===</h3>
<ul>
    {{- range first 10 .Site.RegularPages.ByDate.Reverse -}}
    {{- if not .Params.hidden -}} {{/* hidden: trueì¸ ê¸€ì€ ì œì™¸ */}}
    <li>
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        <br>
        <small>{{ .Date.Format "2006-01-02" }}</small>
    </li>
    {{- end -}}
    {{- else -}}
    <li>ìµœì‹  ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
    {{- end -}}
</ul>

<hr>

{{/* íŒŒì¼ íŠ¸ë¦¬ ì„¹ì…˜ */}}
<h3>=== íŒŒì¼ íŠ¸ë¦¬ ===</h3>
{{/* file-tree.html partialì„ í˜¸ì¶œí•©ë‹ˆë‹¤. ì´ partialì€ ìœ„ì—ì„œ ì¤‘ë³µ ì œê±° ë° ê°œì„ ëœ ë²„ì „ì…ë‹ˆë‹¤. */}}
{{ partial "file-tree.html" (dict "context" .) }}


<hr>

{{/* íƒœê·¸ë³„ ì •ë ¬ (ì¸ê¸° íƒœê·¸ ë˜ëŠ” ëª¨ë“  íƒœê·¸ ëª©ë¡) ì„¹ì…˜ */}}
<h3>=== ì¸ê¸° íƒœê·¸ ===</h3>
{{/* 
  íƒœê·¸ ëª©ë¡ ì„¹ì…˜ (Best Practice)
  .Site.Taxonomies.tags ëŠ” íƒœê·¸ ì´ë¦„(string)ì„ í‚¤ë¡œ, 
  ë¶„ë¥˜ ê°ì²´(Taxonomy Object)ë¥¼ ê°’ìœ¼ë¡œ ê°–ëŠ” ë§µ(Map)ì…ë‹ˆë‹¤.
*/}}

{{/* .Site.Taxonomies.tags ë§µì— íƒœê·¸ê°€ í•˜ë‚˜ë¼ë„ ìˆëŠ”ì§€ í™•ì¸ */}}
{{ if .Site.Taxonomies.tags }}
<ul>
    {{/* 
      .ByCount ë¡œ íƒœê·¸ë¥¼ í¬ìŠ¤íŠ¸ ê°œìˆ˜ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•©ë‹ˆë‹¤. 
      ì•ŒíŒŒë²³ìˆœìœ¼ë¡œ í•˜ë ¤ë©´ .Alphabetical ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    */}}
    {{ range .Site.Taxonomies.tags.ByCount }}
    <li>
        {{/* 
          .Page.RelPermalink ì†ì„±ì„ ì‚¬ìš©í•´ ì˜¬ë°”ë¥¸ ìƒëŒ€ URLì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
          .Page ëŠ” ê° íƒœê·¸ í˜ì´ì§€("hugo", "webdev" ë“±)ì— ëŒ€í•œ í˜ì´ì§€ ê°ì²´ì…ë‹ˆë‹¤.
        */}}
        <a href="{{ .Page.RelPermalink }}">{{ .Name }}</a>
        <span>({{ .Count }})</span>
    </li>
    {{ end }}
</ul>
{{ else }}
<p>íƒœê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
{{ end }}


{{- /* ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•œ JavaScriptë¥¼ í˜ì´ì§€ì— ì¶”ê°€í•©ë‹ˆë‹¤.
í˜ì´ì§€ë‹¹ í•œ ë²ˆë§Œ í¬í•¨ë˜ë„ë¡ Scratchë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. */ -}}
{{- if not (.Scratch.Get "fileTreeScriptLoaded") -}}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const fileTrees = document.querySelectorAll('.file-tree');
        fileTrees.forEach(tree => {
            const detailsElements = tree.querySelectorAll('details');
            detailsElements.forEach(details => {
                const summary = details.querySelector('summary');
                const icon = summary.querySelector('.folder-icon');

                if (details.hasAttribute('open')) {
                    icon.textContent = 'ğŸ“‚';
                }

                details.addEventListener('toggle', () => {
                    if (details.open) {
                        icon.textContent = 'ğŸ“‚';
                    } else {
                        icon.textContent = 'ğŸ“';
                    }
                });
            });
        });
    });
</script>
{{- .Scratch.Set "fileTreeScriptLoaded" true -}}
{{- end -}}


<!-- ì˜ˆì œ 1: ê¸°ë³¸ (ì „ì²´ êµ¬ì¡°, regular ëª¨ë“œ) -->
<div class="file-tree p-4 mb-5 border border-gray-200 rounded-lg bg-gray-50 text-sm">
    <h4 class="text-base font-semibold text-gray-700 mb-2">ê¸°ë³¸: ì½˜í…ì¸  íŒŒì¼ ì „ì²´ êµ¬ì¡° (regular)</h4>
    <ul class="list-none p-0">
        {{- /* ìµœìƒìœ„ í´ë”(ì„¹ì…˜) ë¨¼ì € ìˆœíšŒ */ -}}
        {{- range .Site.Sections.ByTitle -}}
        <li class="mt-1">
            <details>
                <summary class="flex items-center gap-x-2 cursor-pointer select-none">
                    <span class="folder-icon text-lg">ğŸ“</span>
                    <a href="{{ .RelPermalink }}" class="text-blue-600 hover:underline hover:text-blue-800">{{ .Title
                        }}</a>
                </summary>
                {{- partial "file-tree.html" (dict "currentNode" . "mode" "regular") -}}
            </details>
        </li>
        {{- end -}}
        {{- /* --- ìµœìƒìœ„ íŒŒì¼(í˜ì´ì§€) ìˆœíšŒ --- */ -}}
        {{- $rootPages := where .Site.RegularPages "Section" "" -}}
        {{- if $rootPages -}}
        {{- range $rootPages.ByTitle -}}
        <li class="mt-1 flex items-center gap-x-2">
            <span class="text-lg">ğŸ“„</span>
            <a href="{{ .RelPermalink }}" class="text-gray-800 hover:underline">{{ .Title }}</a>
        </li>
        {{- end -}}
        {{- end -}}
    </ul>
</div>


<!-- ì˜ˆì œ 2: All ëª¨ë“œ (ì „ì²´ êµ¬ì¡°) -->
<div class="file-tree p-4 mb-5 border border-gray-200 rounded-lg bg-gray-50 text-sm">
    <h4 class="text-base font-semibold text-gray-700 mb-2">All ëª¨ë“œ: Hugoê°€ ìƒì„±í•œ ëª¨ë“  í˜ì´ì§€ í¬í•¨</h4>
    {{- partial "file-tree.html" (dict "currentNode" .Site.Home "mode" "all") -}}
</div>


<!-- ì˜ˆì œ 3: ê²½ë¡œ ì§€ì • ('/blog' í•˜ìœ„, regular ëª¨ë“œ) -->
<div class="file-tree p-4 mb-5 border border-gray-200 rounded-lg bg-gray-50 text-sm">
    {{- with .Site.GetPage "/blog" -}}
    <h4 class="text-base font-semibold text-gray-700 mb-2">'/blog' í•˜ìœ„ êµ¬ì¡° (regular)</h4>
    <ul>
        <li>
            <details open>
                <summary class="flex items-center gap-x-2 cursor-pointer select-none">
                    <span class="folder-icon text-lg">ğŸ“‚</span>
                    <a href="{{ .RelPermalink }}" class="text-blue-600 hover:underline hover:text-blue-800">{{ .Title
                        }}</a>
                </summary>
                {{- partial "file-tree.html" (dict "currentNode" . "mode" "regular") -}}
            </details>
        </li>
    </ul>
    {{- else -}}
    <p class="text-red-600">ì˜¤ë¥˜: ê²½ë¡œ '/blog'ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
    {{- end -}}
</div>


<!-- ì˜ˆì œ 4: ê²½ë¡œ ë° ëª¨ë“œ ì§€ì • ('/projects' í•˜ìœ„, all ëª¨ë“œ) -->
<div class="file-tree p-4 mb-5 border border-gray-200 rounded-lg bg-gray-50 text-sm">
    {{- with .Site.GetPage "/projects" -}}
    <h4 class="text-base font-semibold text-gray-700 mb-2">'/projects' í•˜ìœ„ êµ¬ì¡° (all)</h4>
    <ul>
        <li>
            <details open>
                <summary class="flex items-center gap-x-2 cursor-pointer select-none">
                    <span class="folder-icon text-lg">ğŸ“‚</span>
                    <a href="{{ .RelPermalink }}" class="text-blue-600 hover:underline hover:text-blue-800">{{ .Title
                        }}</a>
                </summary>
                {{- partial "file-tree.html" (dict "currentNode" . "mode" "all") -}}
            </details>
        </li>
    </ul>
    {{- else -}}
    <p class="text-red-600">ì˜¤ë¥˜: ê²½ë¡œ '/projects'ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
    {{- end -}}
</div>
{{ end }}